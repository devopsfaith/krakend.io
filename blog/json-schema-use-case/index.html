<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>How KrakenD API Gateway uses JSON Schema | KrakenD API Gateway</title><meta name=description content="KrakenD API Gateway ensures robust data integrity with JSON Schema validation, empowering developers to enforce structured and secure API interactions effortlessly."><meta itemprop=name content="How KrakenD API Gateway uses JSON Schema | KrakenD API Gateway"><meta itemprop=description content="KrakenD API Gateway ensures robust data integrity with JSON Schema validation, empowering developers to enforce structured and secure API interactions effortlessly."><meta itemprop=image content="https://www.krakend.io/images/logo.png"><meta property="og:title" content="How KrakenD API Gateway uses JSON Schema"><meta property="og:description" content="KrakenD API Gateway ensures robust data integrity with JSON Schema validation, empowering developers to enforce structured and secure API interactions effortlessly."><meta property="og:type" content="article"><meta property="og:url" content="https://www.krakend.io/blog/json-schema-use-case/"><meta property="og:image" content="https://www.krakend.io/images/krakend-waves.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-11-20T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-20T00:00:00+00:00"><meta property="og:site_name" content="KrakenD - Open source API Gateway"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.krakend.io/images/krakend-waves.png"><meta name=twitter:title content="How KrakenD API Gateway uses JSON Schema"><meta name=twitter:description content="KrakenD API Gateway ensures robust data integrity with JSON Schema validation, empowering developers to enforce structured and secure API interactions effortlessly."><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name=viewport><link rel=stylesheet href="https://www.krakend.io/css/bundle.min.93bd92b01aa23f6f39401b7d1892d580e600406076f3b052c565efdbcd6575ca.css"><link rel=icon type=image/png href=https://www.krakend.io/favicon/favicon-196x196.png sizes=196x196><link rel=icon type=image/png href=https://www.krakend.io/favicon/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://www.krakend.io/favicon/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://www.krakend.io/favicon/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://www.krakend.io/favicon/favicon-128.png sizes=128x128><link href=https://www.googletagmanager.com rel=preconnect crossorigin><link rel=dns-prefetch href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],window.dataLayer.push({pagePublishDate:"2023-11-20",pageModifiedDate:"2023-11-20",pageReadingTimeMinutes:5,pageReadingTimeSeconds:267,pageWordCount:980,pageFuzzyWordCount:1e3,pageKind:"page",pageId:"230a0c2c2db35017304ec9a80cc7031f",pageTitle:"How KrakenD API Gateway uses JSON Schema",pagePermalink:"https://www.krakend.io/blog/json-schema-use-case/",pageType:"blog",pageTranslated:!1,pageAuthor:"Albert Lombarte",pageCategory:"Technical Insights \u0026 Best practices",pageType2:"post",pageLanguage:"en"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="//www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-T8R6LF3")</script></head><body class=krakend><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-T8R6LF3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=print:hidden><p class="flex h-10 items-center justify-center bg-denim-500 px-4 text-sm font-medium text-white sm:px-6 lg:px-8"><a title="Automating License Validity Checks with KrakenD" href=https://www.krakend.io/blog/automating-license-check/ class="text-white text-bold"><span class="inline-flex items-center rounded-full bg-denim-100 px-2.5 py-0.5 mr-2 text-xs font-medium text-denim-800">News</span>
Automating License Validity Checks with KrakenD</a></p><div class=relative><nav class="max-w-7xl mx-auto lg:flex py-6 items-center justify-between"><div class="ml-4 xl:ml-0"><a href=https://www.krakend.io/ title=Home><img src=https://www.krakend.io/images/logo-krakend.svg alt="KrakenD Logo" loading=lazy width=180 height=34></a></div><div class="hidden ml-12 mr-4 xl:mr-0 lg:flex-grow lg:flex lg:justify-between lg:space-x-8" id=navbarMenu><ul class="lg:flex lg:space-x-8 font-medium xl:text-lg whitespace-nowrap z-50"><li><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/open-source/>Open Source</a></li><li><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/enterprise/>Enterprise</a></li><li><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/case-study/>Case studies</a></li><li><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/docs/overview/>Docs</a></li><li class="nav-item dropdown"><a class="hover:text-denim-600 text-gray-700" href=# class="nav-link dropdown-toggle" data-toggle=dropdown>Resources<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg></a><ul class="hidden absolute ml-4 divide-y rounded-lg shadow dropdown-menu bg-white"><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/features/>Open Source VS Enterprise</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/blog/>Blog</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://training.krakend.io/>Training & Certification</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/support/>Support</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://designer.krakend.io>Designer (Config UI)</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/partners/>Partners</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/team/>About us</a></li></ul></li></ul><ul class="hidden lg:flex lg:space-x-4 text-sm font-medium whitespace-nowrap"><li><a class="text-gray-700 hover:text-denim-600" href=https://www.krakend.io/download/><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414.0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414.0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>Downloads</a></li><li><a class="btn -mt-3 bg-denim-800 hover:bg-denim-500 text-white" href=https://www.krakend.io/enterprise/#contact-sales><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg>Request a Demo</a></li></ul></div><button class="print:hidden absolute right-4 top-2 lg:hidden p-3 rounded-lg border border-gray-100 navbar-toggler" type=button data-toggle=collapse data-target=#navbarMenu aria-controls=navbarMenu aria-expanded=false aria-label="Toggle navigation"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></nav></div></div><div class=border-t><div class="grid grid-cols-1 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-8 py-6 max-w-7xl xl:max-w-8xl mx-auto"><div class="print:hidden order-last md:order-first col-span-2"><div class=px-4><h2 class="text-lg text-gray-500 pt-2">Blog categories</h2><ul class="px-6 py-5 space-y-3 text-sm font-medium whitespace-nowrap"><li class=nav-item><a class=nav-link href=https://www.krakend.io/blog/>All categories</a></li></li><li><a href=https://www.krakend.io/categories/product-updates/>Product Updates</a> (47)</li><li><a href=https://www.krakend.io/categories/technical-insights-best-practices/>Technical Insights & Best practices</a> (24)</li><li><a href=https://www.krakend.io/categories/company-announcements/>Company Announcements</a> (13)</li><li><a href=https://www.krakend.io/categories/tutorials-how-tos/>Tutorials & How-Tos</a> (10)</li><li><a href=https://www.krakend.io/categories/security/>Security</a> (7)</li></ul></div><div class="px-4 mt-8"><h2 class="text-lg text-gray-500 pt-8 border-t">Recent entries</h2><ul class="px-6 py-5 space-y-3 text-sm font-medium"><li class=nav-item><a class=nav-link href=https://www.krakend.io/blog/automating-license-check/>Automating License Validity Checks with KrakenD</a></li><li class=nav-item><a class=nav-link href=https://www.krakend.io/blog/krakend-ee-2.6-release-notes/>KrakenD Enterprise v2.6 released with OpenTelemetry, FIPS-140, gRPC server and more</a></li><li class=nav-item><a class=nav-link href=https://www.krakend.io/blog/krakend-2.6-release-notes/>KrakenD CE v2.6 released with OpenTelemetry</a></li><li class=nav-item><a class=nav-link href=https://www.krakend.io/blog/from-opencensus-to-opentelemetry/>From OpenCensus to OpenTelemetry</a></li><li class=nav-item><a class=nav-link href=https://www.krakend.io/blog/2023-recap/>KrakenD 2023: Milestones and New Horizons</a></li></ul></div></div><div class="col-span-3 lg:col-span-4 xl:col-span-5 max-w-full text-lg"><section class=px-4><article class=mb-24><header class="mb-6 lg:mb-12"><h1 class="text-denim-800 text-current text-3xl md:text-5xl"><a class=text-current href=https://www.krakend.io/blog/json-schema-use-case/>How KrakenD API Gateway uses JSON Schema</a></h1><div class="my-4 md:flex items-center gap-x-4"><p class=text-denim-800>by <strong>Albert Lombarte</strong></p><p><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline -mt-1 text-gray-500" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M6 2A1 1 0 005 3v1H4A2 2 0 002 6v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3A1 1 0 006 2zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>Nov 20, 2023</p><div class="text-sm text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline text-gray-500 -mt-1" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3A9 9 0 113 12a9 9 0 0118 0z"/></svg>5 min read</div></div></header><div class="prose prose max-w-full text-lg"><p>Adopting best practices in the dynamic realm of API development is critical to ensuring data integrity, security, and seamless interactions.</p><p>In our experience, <strong>JSON Schema</strong> (<a href=https://json-schema.org/>project website</a>) emerged as a fundamental tool in this journey. Since we started using it, <strong>the developer experience has dramatically improved</strong> for KrakenD core developers and KrakenD users.</p><p>KrakenD uses JSON Schema mainly for five very distinct use cases (though there are more):</p><ul><li>Validating incoming requests on runtime</li><li>Ensure complete responses before returning them to users</li><li>Validate configuration files in deployment and build processes.</li><li>Document our software</li><li>Write End-to-End tests specifications</li></ul><p>Let&rsquo;s have a quick look at these five.</p><h2 id=validating-incoming-requests>Validating Incoming Requests</h2><p>Ensuring that data sent by end-users to an API adheres to a specific contract is crucial for maintaining integrity. Even when your upstream services can validate data, by placing <a href=https://www.krakend.io/docs/enterprise/endpoints/json-schema/>JSON Schema validation</a> in the gateway, you enforce data consistency before the request reaches all your endpoints, saving compute, preventing malformed requests, and enhancing the reliability of your system.</p><p>Let&rsquo;s consider a simple, practical use case - a member wants to update their address. You could have a gateway definition like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;port&#34;</span><span class=p>:</span> <span class=mi>8080</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;endpoints&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;endpoint&#34;</span><span class=p>:</span> <span class=s2>&#34;/member/{id}/address&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;PUT&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;backend&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;host&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;http://members.svc&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url_pattern&#34;</span><span class=p>:</span> <span class=s2>&#34;/updateMemberAddress/{id}&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;extra_config&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;validation/json-schema&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;required&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;number&#34;</span><span class=p>,</span> <span class=s2>&#34;street_name&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;properties&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&#34;number&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;number&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&#34;street_name&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&#34;street_type&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;enum&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;Street&#34;</span><span class=p>,</span> <span class=s2>&#34;Avenue&#34;</span><span class=p>,</span> <span class=s2>&#34;Boulevard&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>In the example above, there is an endpoint receiving a PUT request, and we ensure that the incoming data is a JSON object with specific required fields (<code>number</code> and <code>street_name</code>) and that all fields follow their respective data types.</p><h2 id=validating-outgoing-responses>Validating Outgoing Responses</h2><p>Consistency in responses is equally vital for a positive user experience and data consumption. As <strong>KrakenD aggregates content from multiple APIs in a single endpoint</strong>, the <a href=https://www.krakend.io/docs/enterprise/endpoints/response-schema-validator/>response schema validator</a> allows you to specify the minimal expected structure of outgoing data, ensuring that your API delivers predictable and well-formed responses.</p><p>In the following example, the validator ensures that the final aggregated response contains at least a <code>user_id</code> and a <code>status</code>. But the schema could be anything.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;response-schema-validator&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;schema&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;$schema&#34;</span><span class=p>:</span> <span class=s2>&#34;http://json-schema.org/draft-07/schema&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;properties&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;user&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nt>&#34;properties&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;user_id&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;number&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;required&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;username&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;status&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;error&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;We couldn&#39;t process you request, try again later.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=mi>503</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>If the aggregated response does not comply, you return a custom error <code>We couldn't process your request, try again later.</code> with a <code>503 Service Unavailable</code> status code.</p><h2 id=safe-configuration-files>Safe Configuration Files</h2><p>Finally, the most beneficial usage of JSON Schema for developers is to deploy error-free configurations, and JSON schema participates in numerous places.</p><p>When writing your configuration, you can always specify which version of the schema you want to apply (yes, <a href=https://github.com/krakend/krakend-schema>we maintain one schema for each version of the software</a>) that we host at our website, and you can benefit from the <a href=https://www.krakend.io/docs/developer/ide-integration/#editor-integration-for-krakend-files>IDE integration</a> which provides documentation while hovering an attribute, explanation of errors, and autocompletion of properties.</p><p>In addition, if you split your configuration into multiple files, we keep individual JSON Schemas for each component. <a href=https://github.com/krakend/krakend-schema>See the source code here</a></p><p>Finally, by incorporating JSON Schema into our configuration files, we bring a layer of clarity and validation, making it easier to understand, maintain, and evolve your system&rsquo;s setup as the <code>krakend check --lint</code> command tells you what the incorrect pieces of configuration you are loading are.</p><p>Adding our <code>check</code> command with the JSON schema validation in your CI/CD will abort the deployment/build when you introduce incorrect configurations.</p><h2 id=documenting-our-software>Documenting our software</h2><p>If we have a JSON schema that can validate your configuration, why wouldn&rsquo;t we add titles, descriptions, links, etc., and use it as the base for documentation?</p><p>All the documentation pages on KrakenD load a snippet that takes the data from the schema directly:</p><p>We write a simple snippet in our markdown pages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-t data-lang=t><span class=line><span class=cl><span class=p>{{</span> <span class=o>&lt;</span> <span class=n>schema</span> <span class=n>data</span><span class=o>=</span><span class=s>&#34;krakend.json&#34;</span> <span class=n>filter</span><span class=o>=</span><span class=s>&#34;listen_ip,timeout&#34;</span> <span class=o>&gt;</span><span class=p>}}</span>
</span></span></code></pre></div><p>This renders the documentation table, including example values, defaults, enums, and the URL where the schema was taken from:</p><div class="ring-1 ring-gray-100 rounded-lg bg-gray-100 mb-5"><div class="p-3 border-b border-gray-100 rounded-lg sm:flex sm:justify-between"><div class=flex><h5 class=font-bold>Fields of <code>"false"</code></h5></div><div class="mt-4 sm:mt-0"><span class=text-red-600>*</span> required fields</div></div><div class="px-2 bg-white"><table class="min-w-full divide-y divide-gray-300 nomargin json-schema-render"><tbody><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=listen_ip title="Listen IP" class=inline><a href=https://www.krakend.io/blog/json-schema-use-case/#listen_ip class=copy-link title="Click to copy link to listen_ip"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>listen_ip</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">The IP address that KrakenD listens to in IPv4 or IPv6. An empty string, or no declaration at all means listening on all interfaces. The inclusion of <code>::</code> is meant for IPv6 format only (<strong>this is not the port</strong>). Examples of valid addresses are <code>192.0.2.1</code> (IPv4), <code>2001:db8::68</code> (IPv6). The values <code>::</code> and <code>0.0.0.0</code> listen to all addresses and both are valid for IPv4 and IPv6 simultaneously.<br>Examples: <code>"172.12.1.1"</code> , <code>"::1"</code><br>Defaults to <code>"0.0.0.0"</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=timeout title="Global timeout" class=inline><a href=https://www.krakend.io/blog/json-schema-use-case/#timeout class=copy-link title="Click to copy link to timeout"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>timeout</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">Defines a default timeout for all endpoints. Can be overriden per endpoint.<br>Specify units using <code>ns</code> (nanoseconds), <code>us</code> or <code>µs</code> (microseconds), <code>ms</code> (milliseconds), <code>s</code> (seconds), <code>m</code> (minutes), or <code>h</code> (hours).<br>Defaults to <code>"2s"</code></td></tr></tbody></table></div><div class="border-t text-sm text-right p-2">Schema: <a class=text-sm href=https://www.krakend.io/schema/v2.6/krakend.json title="JSON schema definition">https://www.krakend.io/schema/v2.6/krakend.json</a></div></div><h2 id=defining-end-to-end-tests-with-json-schema>Defining end-to-end tests with JSON Schema</h2><p>The last case is for <a href=https://www.krakend.io/docs/enterprise/developer/integration-tests/>End-to-End Testing</a>. Sometimes test cases cannot be deterministic because querying an endpoint twice might bring different outputs (for instance, there is a field <code>date</code> or <code>time</code> that changes on every execution). In these cases, even if you cannot test a literal value, you can always ensure that the whole response adheres to a specific JSON schema, securing the information you get is what you expect.</p><h2 id=conclusion>Conclusion</h2><p>In summary, embracing JSON Schema as a standard practice in API development offers a trifecta of benefits. It fortifies our APIs against malformed requests, ensures consistent responses, brings order to configuration files, and helps us have better documentation.</p><p><strong>Adopting JSON Schema on KrakenD has been a game-changer in development</strong>.</p><p>As a result, you build robust and reliable APIs, streamline development processes, and foster collaboration within your team. JSON Schema isn&rsquo;t just a validator; it&rsquo;s a cornerstone of modern API development.</p><p>For more information about how JSON Schema defines structures, <a href=https://json-schema.org/specification>check their specification</a></p><div class="border-t border-gray-200"><p class=text-sm><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-gray-500" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414.0l-7-7A.997.997.0 012 10V5a3 3 0 013-3h5c.256.0.512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/></svg>Categories:
<a href=https://www.krakend.io/categories/technical-insights-best-practices/ title="More posts about Technical Insights & Best practices"><span class="inline-flex items-center rounded-full bg-denim-100 px-2.5 py-0.5 mr-2 text-xs font-medium text-denim-800">Technical Insights & Best practices</span></a></p></div></div></article></section></div></div></div><img referrerpolicy=no-referrer-when-downgrade src="https://static.scarf.sh/a.png?x-pxid=f7c494d3-4574-4ef2-977b-b8b1708cd61d" width=1 height=1 alt=Scarf style=position:absolute><div class="print:hidden bg-gradient-to-r from-denim-500 to-denim-800 py-8"><div class="max-w-7xl mx-auto sm:flex sm:space-y-0 space-y-4 text-center sm:text-left items-center justify-between px-8"><div class="flex-none text-xl font-medium text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" viewBox="0 0 20 20" fill="currentcolor"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0016 4H4A2 2 0 002.003 5.884z"/><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/></svg>&nbsp;Stay up to date with KrakenD releases and important updates</div><div class=flex-grow><form action="https://krakend.us19.list-manage.com/subscribe/post?u=5cae4bbe9877b1adfe8fe808d&amp;id=e5385eb57b&amp;v_id=4265&amp;f_id=006687e4f0" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate><div style=position:absolute;left:-5000px aria-hidden=true><input type=text name=b_5cae4bbe9877b1adfe8fe808d_e5385eb57b tabindex=-1></div><div class="flex items-center justify-center sm:justify-end"><input type=email name=EMAIL class="block rounded-l px-3 py-1 w-full max-w-xs" id=mce-EMAIL placeholder="email address" required>
<input type=hidden name=tags value=6244009>
<input type=hidden id=gdpr_14365 name=gdpr[14365] value=Y>
<input type=submit class="block bg-denim-500 text-white rounded-r px-3 py-1" value=Subscribe></div></form></div></div></div><footer class="print:hidden bg-gradient-to-r from-denim-900 to-denim-800 py-8 sm:py-18 text-gray-300"><div class="max-w-7xl mx-auto px-4"><div class="lg:grid lg:grid-cols-6 md:grid md:grid-cols-4"><div class="lg:col-span-3 pr-12"><img src=https://www.krakend.io/images/logo-white.png alt="KrakenD API Gateway" loading=lazy width=353 height=70><p class="text-xl my-6 text-denim-300">The <strong>Ultra-High performance</strong> Open Source API Gateway</p><p class="text-sm my-4">KrakenD helps application developers release features quickly by eliminating all the complexities of SOA architectures while offering a unique performance.</p></div><div><h6>Social</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=https://www.krakend.io/blog/>Blog</a></li><li><a class=text-denim-300 href=https://medium.com/krakend>Medium</a></li><li><a class=text-denim-300 href=https://twitter.com/krakend_io>Twitter</a></li><li><a class=text-denim-300 href=https://github.com/krakend/>GitHub</a></li><li><a class=text-denim-300 href=https://www.linkedin.com/company/krakend/>LinkedIn</a></li></ul><h6>Experiments</h6><ul class="ml-2 mb-2"><li><a class=text-denim-300 href=https://api2html.com>API2HTML</a></li></ul></div><div><h6>KrakenD</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=https://www.krakend.io/open-source/>Open Source</a></li><li><a class=text-denim-300 href=https://www.krakend.io/enterprise/>Enterprise</a></li><li><a class=text-denim-300 href=https://www.krakend.io/case-study/>Case studies</a></li><li><a class=text-denim-300 href=https://www.krakend.io/docs/benchmarks/>Benchmarks</a></li><li><a class=text-denim-300 href=https://www.krakend.io/download/>Download</a></li><li><a class=text-denim-300 href=https://www.krakend.io/team/>Team</a></li></ul></div><div><h6>Support</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=https://www.krakend.io/support/>Support channels</a></li><li><a class=text-denim-300 href=https://training.krakend.io/>Training & Certification</a></li><li><a class=text-denim-300 href=https://www.krakend.io/docs/overview/>Documentation</a></li><li><a class=text-denim-300 href=https://github.com/krakend/krakend-ce target=_blank>Open Source</a></li><li><a class=text-denim-300 href=https://github.com/krakend/krakend-ce/issues>Report an issue</a></li><li><a class=text-denim-300 href=https://www.krakend.io/security-policy/>Report a vulnerability</a></li></ul></div></div><div class="sm:flex sm:justify-between sm:items:center"><div><strong>Copyright &copy; 2017-2024 KRAKEND S.L.</strong> - <a href=https://www.krakend.io/terms/ class=text-denim-300>Terms</a> - <a href=https://www.krakend.io/privacy-policy/ class=text-denim-300>Privacy Policy</a></div><div class=whitespace-nowrap>Made with&nbsp;
<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-red-600 animate-pulse" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656.0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/></svg>&nbsp;in Barcelona</div></div></div><div class="max-w-7xl mx-auto px-4 mt-8 text-center"><div class="grid grid-cols-3 gap-8 items-center"><div class="justify-self-end sf-root" data-id=3447599 data-badge=light-default data-variant-id=sf style=width:100px><a href=https://sourceforge.net/software/product/KrakenD/ target=_blank>KrakenD Reviews</a></div><script>(function(){var t,e=document.createElement("script");e.async=!0,e.src="https://b.sf-syn.com/badge_js?sf_id=3447599&variant_id=sf",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script><a class=justify-self-center title="KrakenD API Gateway is a leader in API Management on G2" href="https://www.g2.com/products/krakend-api-gateway/reviews?utm_source=rewards-badge"><img style=width:100px alt="KrakenD API Gateway is a leader in API Management on G2" src=https://images.g2crowd.com/uploads/report_medal/image/1004595/medal.svg>
</a><script>(function(e,t,n,s){window.fetch("https://www.g2.com/products/krakend-api-gateway/rating_schema.json").then(e=>e.json()).then(o=>{n=e.createElement(t),n.type="application/ld+json",n.text=JSON.stringify(o),s=e.getElementsByTagName(t)[0],s.parentNode.insertBefore(n,s)})})(document,"script")</script><div class=sf-root data-id=3447599 data-badge=users-love-us-new-white data-variant-id=sd style=width:100px><a href=https://slashdot.org/software/p/KrakenD/ target=_blank>KrakenD Reviews</a></div><script>(function(){var t,e=document.createElement("script");e.async=!0,e.src="https://b.sf-syn.com/badge_js?sf_id=3447599&variant_id=sd",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script></div></div></footer><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin=anonymous></script>
<script src=https://www.krakend.io/main.js></script>
<script>(function(e,t,n,s,o,i){o="",s="https://tracking.g2crowd.com/attribution_tracking/conversions/"+e+".js?p="+encodeURI(t)+"&e="+o,i=document.createElement("script"),i.type="application/javascript",i.async=!0,i.src=s,n.getElementsByTagName("head")[0].appendChild(i)})("1007316",document.location.href,document)</script></body></html>