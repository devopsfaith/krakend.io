<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.98.0"><title>JSON Web Token Validation - KrakenD API Gateway</title><meta name=description content="Protect endpoints from public usage by validating JWT tokens generated by any industry-standard OpenID Connect (OIDC) integration.
Before digging any further, …"><meta itemprop=name content="JSON Web Token Validation - KrakenD API Gateway"><meta itemprop=description content="Protect endpoints from public usage by validating JWT tokens generated by any industry-standard OpenID Connect (OIDC) integration.
Before digging any further, …"><meta itemprop=image content="https://www.krakend.io/images/logo.png"><meta property="og:title" content="JSON Web Token Validation"><meta property="og:description" content="Protect endpoints from public usage by validating JWT tokens generated by any industry-standard OpenID Connect (OIDC) integration.
Before digging any further, some answers to frequently asked questions:
  KrakenD does not generate the tokens itself. Still, you can plug it into any SaaS or self-hosted OpenID Identity Provider (IdP) using industry standards (e.g., Auth0, Azure AD, Google Firebase, Keycloak, etc.)
  KrakenD does not need to validate all calls using your IdP."><meta property="og:type" content="article"><meta property="og:url" content="https://www.krakend.io/docs/authorization/jwt-validation/"><meta property="og:image" content="https://www.krakend.io/images/krakend-waves.png"><meta property="article:section" content="docs"><meta property="article:published_time" content="2018-11-03T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-17T00:00:00+00:00"><meta property="og:site_name" content="KrakenD - Open source API Gateway"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.krakend.io/images/krakend-waves.png"><meta name=twitter:title content="JSON Web Token Validation"><meta name=twitter:description content="Protect endpoints from public usage by validating JWT tokens generated by any industry-standard OpenID Connect (OIDC) integration.
Before digging any further, some answers to frequently asked questions:
  KrakenD does not generate the tokens itself. Still, you can plug it into any SaaS or self-hosted OpenID Identity Provider (IdP) using industry standards (e.g., Auth0, Azure AD, Google Firebase, Keycloak, etc.)
  KrakenD does not need to validate all calls using your IdP."><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name=viewport><meta name=docsearch:language content="en"><meta name=docsearch:version content="current"><meta name=docsearch:relevant content="true"><link rel=stylesheet href="https://www.krakend.io/css/bundle.min.e79c756320c78d7a38070e3f6f65449d1838ffdbea54faf6b131956fd7bd8612.css"><link rel=icon type=image/png href=/favicon/favicon-196x196.png sizes=196x196><link rel=icon type=image/png href=/favicon/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicon/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicon/favicon-128.png sizes=128x128><script type=application/javascript>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-87994359-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@alpha></head><body class="krakend page-40e6dfd8aa18e108abc466c0ebce946f"><div class=print:hidden><p class="flex h-10 items-center justify-center bg-denim-500 px-4 text-sm font-medium text-white sm:px-6 lg:px-8"><span class="inline-flex items-center rounded-full bg-denim-100 px-2.5 py-0.5 mr-2 text-xs font-medium text-denim-800">Case Study</span>
<a title="Case study - Rainbow Smile" href=https://www.krakend.io/case-study/rainbow-smile/ class="text-white text-bold">Rainbow Smile, the second largest retail chain in Russia, implemented KrakenD and saw a 10% reduction in TTM and a 70% …</a></p><div class=relative><nav class="max-w-7xl mx-auto lg:flex py-6 items-center justify-between"><div class="ml-4 xl:ml-0"><a href=/ title=Home><img src=/images/logo-krakend.svg alt="KrakenD Logo" width=180></a></div><div class="hidden ml-12 mr-4 xl:mr-0 lg:flex-grow lg:flex lg:justify-between lg:space-x-8" id=navbarMenu><ul class="lg:flex lg:space-x-8 font-medium xl:text-lg whitespace-nowrap z-50"><li><a class="hover:text-denim-600 text-gray-700" href=/open-source/>Open Source</a></li><li><a class="hover:text-denim-600 text-gray-700" href=/enterprise/>Enterprise</a></li><li><a class="hover:text-denim-600 text-gray-700" href=https://www.krakend.io/case-study/>Case studies</a></li><li><a class="hover:text-denim-600 text-gray-700" href=/docs/overview/>Docs</a></li><li class="nav-item dropdown"><a class="hover:text-denim-600 text-gray-700" href=# class="nav-link dropdown-toggle" data-toggle=dropdown>Resources<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg></a><ul class="hidden absolute ml-4 divide-y rounded-lg shadow dropdown-menu bg-white"><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=/blog/>Blog</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=/support/>Support</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=https://designer.krakend.io>Designer (Config UI)</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=/partners/>Partners</a></li><li class="py-1 px-6"><a class="hover:text-denim-600 text-gray-700" href=/team/>About us</a></li></ul></li></ul><ul class="hidden lg:flex lg:space-x-4 text-sm font-medium whitespace-nowrap"><li><a class="text-gray-700 hover:text-denim-600" href=/download/><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414.0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414.0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>Downloads</a></li><li><a class="btn -mt-3 bg-denim-800 hover:bg-denim-500 text-white" href=/enterprise/#contact-sales><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg>Request a Demo</a></li></ul></div><button class="print:hidden absolute right-4 top-2 lg:hidden p-3 rounded-lg border border-gray-100 navbar-toggler" type=button data-toggle=collapse data-target=#navbarMenu aria-controls=navbarMenu aria-expanded=false aria-label="Toggle navigation"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></nav></div><nav class="bg-gray-50 border-b border-t border-gray-200 flex sticky top-0 z-20" aria-label=Breadcrumb><ol role=list class="max-w-screen-xl w-full mx-auto flex space-x-4"><li class=flex><div class="flex items-center"><a href=/docs/overview/ class="text-gray-400 hover:text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg><span class=sr-only>Documentation</span></a></div></li><li class="flex hidden lg:inline"><div class="flex items-center"><svg class="flex-shrink-0 w-6 h-full text-gray-200" viewBox="0 0 24 44" preserveAspectRatio="none" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M.293.0l22 22-22 22h1.414l22-22-22-22H.293z"/></svg><a href=/docs/overview/ class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700">Documentation</a></div></li><li class="flex hidden lg:inline"><div class="flex items-center"><svg class="flex-shrink-0 w-6 h-full text-gray-200" viewBox="0 0 24 44" preserveAspectRatio="none" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M.293.0l22 22-22 22h1.414l22-22-22-22H.293z"/></svg><a href=/docs/overview/ class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700">Community v2.2.1</a></div></li><li class="flex hidden lg:inline"><div class="flex items-center"><svg class="flex-shrink-0 w-6 h-full text-gray-200" viewBox="0 0 24 44" preserveAspectRatio="none" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M.293.0l22 22-22 22h1.414l22-22-22-22H.293z"/></svg><span class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700">Authentication & Authorization</span></div></li><li class=flex><div class="flex items-center"><svg class="flex-shrink-0 w-6 h-full text-gray-200" viewBox="0 0 24 44" preserveAspectRatio="none" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M.293.0l22 22-22 22h1.414l22-22-22-22H.293z"/></svg><span class="ml-4 text-sm font-medium font-bold text-gray-500 hover:text-gray-700">JWT Validation</span></div></li><li class="flex-1 flex justify-center lg:ml-6 lg:justify-end"><div id=doc-selector class="hidden border border-gray-200 bg-white px-2 absolute top-11"><p class="text-sm font-medium tracking-wide text-denim-800 uppercase text-center p-2">Change version</p><ul class="px-6 pb-2"><li><p class=font-medium>KrakenD Community Edition</p><ul><li class="ml-2 p-1 nav-item child"><a href=/docs/authorization/jwt-validation/ class="nav-link children font-bold">v2.2.1 <span class="flex-none uppercase bg-denim-200 text-gray-600 text-xs tracking-wide px-2 py-1 rounded-md ml-1">Latest</span></a></li><li class="ml-2 p-1 nav-item child"><a href=/docs/v2.1/authorization/jwt-validation/ class="nav-link children">v2.1</a></li><li class="ml-2 p-1 nav-item child"><a href=/docs/v2.0/authorization/jwt-validation/ class="nav-link children">v2.0</a></li><li class="ml-2 p-1 nav-item child"><a href=/docs/v1.4/authorization/jwt-validation/ class="nav-link children">v1.4</a></li><li class="ml-2 p-1 nav-item child"><a href=/docs/v1.3/authorization/jwt-validation/ class="nav-link children">v1.3</a></li></ul></li><p class=font-medium>KrakenD Enterprise Edition</p><ul><li class="ml-2 p-1 nav-item child"><a href=/docs/enterprise/authorization/jwt-validation/ class="nav-link children">v2.1.2 <span class="flex-none uppercase bg-denim-200 text-gray-600 text-xs tracking-wide px-2 py-1 rounded-md ml-1">Latest</span></a></li><li class="ml-2 p-1 nav-item child"><a href=/docs/enterprise/v2.0/authorization/jwt-validation/ class="nav-link children">v2.0</a></li><li class="ml-2 p-1 nav-item child"><a href=/docs/enterprise/v1.3/authorization/jwt-validation/ class="nav-link children">v1.3</a></li></ul></li></ul></div><div class="flex items-center bg-white border-l border-r border-gray-200"><h4 class="flex items-center"><a class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700" href=# class="nav-link dropdown-toggle" data-toggle=collapse data-target=#doc-selector><strong class=text-denim-500>Community
v2.2.1 <span class="flex-none uppercase bg-denim-200 text-gray-600 text-xs tracking-wide font-semibold px-2 py-1 rounded-md ml-3">Latest</span></strong><svg xmlns="http://www.w3.org/2000/svg" class="mr-2 h-5 w-5 inline text-denim-500" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg></a></h4></div></li></ol></nav></div><div><div class="grid grid-cols-1 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-8 py-6 max-w-7xl xl:max-w-8xl mx-auto"><div class="print:hidden order-last md:order-first col-span-2"><div class=px-4><div id=docsearch class="flex border border-gray-200 mb-2 rounded-lg"></div><h2 class="text-lg mt-6 text-gray-500 pt-2 border-t">Documentation</h2><ul class="px-6 py-5 space-y-3 text-sm font-medium" id=doc-sections><li class=nav-item><a data-toggle=collapse data-target=#menu-0 data-hide="#doc-sections > li.nav-item > div" href=#menu-0 role=button aria-expanded=false aria-controls=menu-0 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Getting Started</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-0><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/overview/ class="nav-link children">Introduction</a></li><li class="nav-item child"><a href=/docs/overview/installing/ class="nav-link children">Installing KrakenD</a></li><li class="nav-item child"><a href=/docs/overview/run/ class="nav-link children">Running KrakenD</a></li><li class="nav-item child"><a href=/docs/overview/lura-vs-krakend/ class="nav-link children">Lura vs. KrakenD</a></li><li class="nav-item child"><a href=/docs/overview/playground/ class="nav-link children">The Playground</a></li><li class="nav-item child"><a href=/docs/overview/guides/ class="nav-link children">Tutorials and Guides</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-1 data-hide="#doc-sections > li.nav-item > div" href=#menu-1 role=button aria-expanded=false aria-controls=menu-1 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Configuration file(s)</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-1><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/configuration/ class="nav-link children">Configuration overview</a></li><li class="nav-item child"><a href=/docs/configuration/structure/ class="nav-link children">The configuration file</a></li><li class="nav-item child"><a href=/docs/configuration/check/ class="nav-link children">Configuration check</a></li><li class="nav-item child"><a href=/docs/configuration/audit/ class="nav-link children">Configuration audit</a></li><li class="nav-item child"><a href=/docs/configuration/flexible-config/ class="nav-link children">Flexible Configuration</a></li><li class="nav-item child"><a href=/docs/configuration/supported-formats/ class="nav-link children">Supported file formats</a></li><li class="nav-item child"><a href=/docs/configuration/environment-vars/ class="nav-link children">Environment vars</a></li><li class="nav-item child"><a href=/docs/developer/hot-reload/ class="nav-link children">Watch and hot reload</a></li><li class="nav-item child"><a href=/docs/configuration/migrating/ class="nav-link children">Migrating from 1.x or 0.x</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-2 data-hide="#doc-sections > li.nav-item > div" href=#menu-2 role=button aria-expanded=false aria-controls=menu-2 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Service Settings</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-2><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/service-settings/ class="nav-link children">Service Settings</a></li><li class="nav-item child"><a href=/docs/service-settings/health/ class="nav-link children">Health check</a></li><li class="nav-item child"><a href=/docs/service-settings/router-options/ class="nav-link children">Router options</a></li><li class="nav-item child"><a href=/docs/service-settings/cors/ class="nav-link children">CORS</a></li><li class="nav-item child"><a href=/docs/service-settings/tls/ class="nav-link children">TLS</a></li><li class="nav-item child"><a href=/docs/service-settings/security/ class="nav-link children">HTTP Security</a></li><li class="nav-item child"><a href=/docs/service-settings/http-server-settings/ class="nav-link children">HTTP Server settings</a></li><li class="nav-item child"><a href=/docs/service-settings/http-transport-settings/ class="nav-link children">HTTP Transport settings</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-3 data-hide="#doc-sections > li.nav-item > div" href=#menu-3 role=button aria-expanded=false aria-controls=menu-3 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Endpoint Configuration</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-3><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/endpoints/ class="nav-link children">The endpoint object</a></li><li class="nav-item child"><a href=/docs/endpoints/content-types/ class="nav-link children">Output encoding</a></li><li class="nav-item child"><a href=/docs/endpoints/parameter-forwarding/ class="nav-link children">Parameter forwarding</a></li><li class="nav-item child"><a href=/docs/endpoints/rate-limit/ class="nav-link children">Rate Limits</a></li><li class="nav-item child"><a href=/docs/endpoints/response-manipulation/ class="nav-link children">Response manipulation</a></li><li class="nav-item child"><a href=/docs/endpoints/status-codes/ class="nav-link children">Status Codes</a></li><li class="nav-item child"><a href=/docs/endpoints/concurrent-requests/ class="nav-link children">Concurrent Requests</a></li><li class="nav-item child"><a href=/docs/endpoints/debug-endpoint/ class="nav-link children">Debug endpoint</a></li><li class="nav-item child"><a href=/docs/endpoints/no-op/ class="nav-link children">No-op (proxy only)</a></li><li class="nav-item child"><a href=/docs/endpoints/sequential-proxy/ class="nav-link children">Sequential Proxy (chain reqs.)</a></li><li class="nav-item child"><a href=/docs/endpoints/static-proxy/ class="nav-link children">Static responses (stubs)</a></li><li class="nav-item child"><a href=/docs/endpoints/common-expression-language-cel/ class="nav-link children">Conditional requests and responses</a></li><li class="nav-item child"><a href=/docs/endpoints/lua/ class="nav-link children">Lua scripting</a></li><li class="nav-item child"><a href=/docs/endpoints/json-schema/ class="nav-link children">JSON Schema request validation</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-4 data-hide="#doc-sections > li.nav-item > div" href=#menu-4 role=button aria-expanded=false aria-controls=menu-4 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Backends Configuration</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-4><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/backends/ class="nav-link children">The backend object</a></li><li class="nav-item child"><a href=/docs/backends/data-manipulation/ class="nav-link children">Data manipulation</a></li><li class="nav-item child"><a href=/docs/backends/flatmap/ class="nav-link children">Array manipulations, object flattening</a></li><li class="nav-item child"><a href=/docs/backends/rate-limit/ class="nav-link children">Proxy rate limit</a></li><li class="nav-item child"><a href=/docs/backends/service-discovery/ class="nav-link children">Service Discovery</a></li><li class="nav-item child"><a href=/docs/backends/circuit-breaker/ class="nav-link children">Circuit Breaker</a></li><li class="nav-item child"><a href=/docs/backends/supported-encodings/ class="nav-link children">Supported encodings</a></li><li class="nav-item child"><a href=/docs/backends/caching/ class="nav-link children">Caching responses</a></li><li class="nav-item child"><a href=/docs/backends/shadow-backends/ class="nav-link children">Traffic shadowing/mirroring</a></li><li class="nav-item child"><a href=/docs/backends/martian/ class="nav-link children">Transform requests and responses</a></li><li class="nav-item child"><a href=/docs/backends/amqp-consumer/ class="nav-link children">RabbitMQ Consumer</a></li><li class="nav-item child"><a href=/docs/backends/amqp-producer/ class="nav-link children">RabbitMQ Producer</a></li><li class="nav-item child"><a href=/docs/backends/pubsub/ class="nav-link children">Publisher/subscribe</a></li><li class="nav-item child"><a href=/docs/backends/lambda/ class="nav-link children">Lambda functions</a></li><li class="nav-item child"><a href=/docs/backends/detailed-errors/ class="nav-link children">Return backend errors</a></li><li class="nav-item child"><a href=/docs/backends/graphql/ class="nav-link children">GraphQL</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-5 data-hide="#doc-sections > li.nav-item > div" href=#menu-5 role=button aria-expanded=true aria-controls=menu-5 class="nav-link parent active text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Authentication & Authorization</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500" id=menu-5><ul class="space-y-2 nav flex-column menu-open"><li class="nav-item child"><a href=/docs/authorization/jwt-overview/ class="nav-link children">JWT overview</a></li><li class="nav-item child"><a href=/docs/authorization/jwt-validation/ class="nav-link children font-bold"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-3 w-3" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>JWT Validation</a></li><li class="nav-item child"><a href=/docs/authorization/jwt-signing/ class="nav-link children">JWT Signing</a></li><li class="nav-item child"><a href=/docs/authorization/revoking-tokens/ class="nav-link children">Revoking tokens</a></li><li class="nav-item child"><a href=/docs/authorization/mutual-authentication/ class="nav-link children">Mutual TLS Authentication (mTLS)</a></li><li class="nav-item child"><a href=/docs/authorization/client-credentials/ class="nav-link children">OAuth2 Client credentials</a></li><li class="nav-item child"><a href=/docs/authorization/auth0/ class="nav-link children">Auth0 integration</a></li><li class="nav-item child"><a href=/docs/authorization/keycloak/ class="nav-link children">Keycloak integration</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-6 data-hide="#doc-sections > li.nav-item > div" href=#menu-6 role=button aria-expanded=false aria-controls=menu-6 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Event Driven Gateway</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-6><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/async/ class="nav-link children">Async Agents</a></li><li class="nav-item child"><a href=/docs/async/amqp/ class="nav-link children">AMQP driver for Async Agent</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-7 data-hide="#doc-sections > li.nav-item > div" href=#menu-7 role=button aria-expanded=false aria-controls=menu-7 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Traffic Management</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-7><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/throttling/ class="nav-link children">Throttling overview</a></li><li class="nav-item child"><a href=/docs/throttling/load-balancing/ class="nav-link children">Load balancing</a></li><li class="nav-item child"><a href=/docs/throttling/token-bucket/ class="nav-link children">Token Bucket</a></li><li class="nav-item child"><a href=/docs/throttling/spike-arrest/ class="nav-link children">Spike Arrest</a></li><li class="nav-item child"><a href=/docs/throttling/botdetector/ class="nav-link children">Bot detector</a></li><li class="nav-item child"><a href=/docs/throttling/timeouts/ class="nav-link children">Request timeouts</a></li><li class="nav-item child"><a href=/docs/throttling/cluster/ class="nav-link children">Cluster rate-limit</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-8 data-hide="#doc-sections > li.nav-item > div" href=#menu-8 role=button aria-expanded=false aria-controls=menu-8 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Telemetry and Analytics</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-8><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/telemetry/ class="nav-link children">Telemetry integrations</a></li><li class="nav-item child"><a href=/docs/telemetry/influxdb/ class="nav-link children">InfluxDB</a></li><li class="nav-item child"><a href=/docs/telemetry/opencensus/ class="nav-link children">Opencensus</a></li><li class="nav-item child"><a href=/docs/telemetry/grafana/ class="nav-link children">Grafana Dashboard</a></li><li class="nav-item child"><a href=/docs/telemetry/prometheus/ class="nav-link children">Prometheus</a></li><li class="nav-item child"><a href=/docs/telemetry/datadog/ class="nav-link children">Datadog</a></li><li class="nav-item child"><a href=/docs/telemetry/zipkin/ class="nav-link children">Zipkin</a></li><li class="nav-item child"><a href=/docs/telemetry/jaeger/ class="nav-link children">Jaeger</a></li><li class="nav-item child"><a href=/docs/telemetry/xray/ class="nav-link children">AWS X-Ray</a></li><li class="nav-item child"><a href=/docs/telemetry/stackdriver/ class="nav-link children">Google Cloud</a></li><li class="nav-item child"><a href=/docs/telemetry/azure/ class="nav-link children">Azure Monitor</a></li><li class="nav-item child"><a href=/docs/telemetry/ocagent/ class="nav-link children">OpenCensus Agent</a></li><li class="nav-item child"><a href=/docs/telemetry/extended-metrics/ class="nav-link children">Extended metrics</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-9 data-hide="#doc-sections > li.nav-item > div" href=#menu-9 role=button aria-expanded=false aria-controls=menu-9 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Logging</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-9><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/logging/ class="nav-link children">Standard Logging</a></li><li class="nav-item child"><a href=/docs/logging/graylog-gelf/ class="nav-link children">Graylog - GELF</a></li><li class="nav-item child"><a href=/docs/logging/logstash/ class="nav-link children">Logstash</a></li><li class="nav-item child"><a href=/docs/logging/elk-integration/ class="nav-link children">ELK dashboard</a></li><li class="nav-item child"><a href=/docs/telemetry/logger/ class="nav-link children">Logging through OpenCensus</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-10 data-hide="#doc-sections > li.nav-item > div" href=#menu-10 role=button aria-expanded=false aria-controls=menu-10 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Deployment and Go-Live</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-10><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/deploying/ class="nav-link children">Best practices</a></li><li class="nav-item child"><a href=/docs/deploying/clustering/ class="nav-link children">Running in a cluster</a></li><li class="nav-item child"><a href=/docs/deploying/server-dimensioning/ class="nav-link children">Server requirements</a></li><li class="nav-item child"><a href=/docs/deploying/ci-cd/ class="nav-link children">CI/CD integration</a></li><li class="nav-item child"><a href=/docs/deploying/docker/ class="nav-link children">Docker artifact</a></li><li class="nav-item child"><a href=/docs/deploying/kubernetes/ class="nav-link children">To Kubernetes</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-11 data-hide="#doc-sections > li.nav-item > div" href=#menu-11 role=button aria-expanded=false aria-controls=menu-11 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Developer Tools</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-11><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/developer/ class="nav-link children">Developer Tools</a></li><li class="nav-item child"><a href=/docs/developer/ide-integration/ class="nav-link children">IDE integration</a></li><li class="nav-item child"><a href=/docs/developer/integration-tests/ class="nav-link children">Run integration tests</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-12 data-hide="#doc-sections > li.nav-item > div" href=#menu-12 role=button aria-expanded=false aria-controls=menu-12 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Custom Plugins and Middleware</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-12><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/extending/ class="nav-link children">Introduction to plugins</a></li><li class="nav-item child"><a href=/docs/extending/writing-plugins/ class="nav-link children">Writing custom plugins</a></li><li class="nav-item child"><a href=/docs/extending/injecting-plugins/ class="nav-link children">Injecting plugins</a></li><li class="nav-item child"><a href=/docs/extending/http-server-plugins/ class="nav-link children">HTTP server plugins</a></li><li class="nav-item child"><a href=/docs/extending/http-client-plugins/ class="nav-link children">HTTP client plugins</a></li><li class="nav-item child"><a href=/docs/extending/plugin-modifiers/ class="nav-link children">Req/resp modifier plugins</a></li><li class="nav-item child"><a href=/docs/extending/check-plugin/ class="nav-link children">Checking your plugins</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-13 data-hide="#doc-sections > li.nav-item > div" href=#menu-13 role=button aria-expanded=false aria-controls=menu-13 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Benchmarks</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-13><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/benchmarks/ class="nav-link children">Benchmarks Overview</a></li><li class="nav-item child"><a href=/docs/benchmarks/api-gateway-benchmark/ class="nav-link children">KrakenD vs others</a></li><li class="nav-item child"><a href=/docs/benchmarks/aws/ class="nav-link children">On Amazon Web Services</a></li><li class="nav-item child"><a href=/docs/benchmarks/local/ class="nav-link children">Local machine</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-14 data-hide="#doc-sections > li.nav-item > div" href=#menu-14 role=button aria-expanded=false aria-controls=menu-14 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Design principles</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-14><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/design/ class="nav-link children">The big picture</a></li><li class="nav-item child"><a href=/docs/design/execution-flow/ class="nav-link children">The execution flow</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-15 data-hide="#doc-sections > li.nav-item > div" href=#menu-15 role=button aria-expanded=false aria-controls=menu-15 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Frequently Asked Questions</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-15><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/faq/ class="nav-link children">KrakenD F.A.Q</a></li></ul></div></li></ul></div><p class=text-center><small><a href=/docs/ rel=nofollow class=text-muted>Recent changes</a></small></p></div><div class="col-span-3 lg:col-span-4 xl:col-span-5 prose max-w-full text-lg"><section class=px-4><h1>JSON Web Token Validation</h1><div class="hidden isolate lg:block text-base float-right ml-4 max-w-sm space-y-4 relative z-10"><p class="text-sm text-right last_update">Last update: Jan 17, 2023</p><div class="shadow rounded bg-white"><h5 class="-mb-6 text-gray-500 bg-gray-100 px-4 py-2 uppercase text-sm"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98.0a1.532 1.532.0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6.0 2.978a1.532 1.532.0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532.0 012.287.947c.379 1.561 2.6 1.561 2.978.0a1.533 1.533.0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533.0 01.947-2.287c1.561-.379 1.561-2.6.0-2.978a1.532 1.532.0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532.0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/></svg>About this feature</h5><table><tbody><tr><th class="pl-4 whitespace-nowrap" scope=row>Namespace
<a class=cursor-help title="The key you have to put inside the extra_config object"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21.0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12A9 9 0 113 12a9 9 0 0118 0z"/></svg></a></th><td><code>auth/validator</code></td></tr><tr><th class="pl-4 whitespace-nowrap" scope=row>Log prefix <i class="fa fa-question-circle" data-toggle=tooltip data-placement=right title="All lines in the log begin with this prefix"></i></th><td><code>[ENDPOINT: /foo][JWTValidator]</code></td></tr><tr><th class="pl-4 whitespace-nowrap" scope=row>Scope
<a class=cursor-help title="Possible placements of the extra_config inside the configuration file"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21.0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12A9 9 0 113 12a9 9 0 0118 0z"/></svg></a></th><td><code>endpoint</code></td></tr><tr><th class="pl-4 whitespace-nowrap" scope=row>Source</th><td><a href=https://github.com/krakendio/krakend-jose><i class="fab fa-github"></i> krakendio/krakend-jose</a></td></tr></tbody></table><div class="-mt-6 p-2 text-right text-sm mr-2"><a href=/docs/configuration/structure/><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline -mt-1" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>Configuration reference</a></div></div><div id=toc-module class="print:hidden shadow rounded bg-white mt-2 text-sm"><a class="block m-0 bg-gray-100 px-4 py-2 uppercase text-sm close-arrow" data-toggle=collapse data-target=#table-of-contents-list href=#><span class=float-right>&nbsp;</span>
<span class=text-gray-500><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline -mt-1" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>Table of contents</span></a><div id=table-of-contents-list class="px-4 pb-1 bg-white rounded-b-lg"><nav id=TableOfContents><ul><li><a href=#jwt-header-requirements>JWT header requirements</a></li><li><a href=#basic-jwt-validation>Basic JWT validation</a></li><li><a href=#jwt-validation-settings>JWT validation settings</a><ul><li><a href=#validation-process>Validation process</a></li><li><a href=#accepted-providers-for-encrypting-payloads>Accepted providers for encrypting payloads</a></li></ul></li><li><a href=#passing-claims-to-the-backend-url>Passing claims to the backend URL</a></li><li><a href=#propagate-jwt-claims-as-request-headers>Propagate JWT claims as request headers</a></li><li><a href=#a-complete-running-example>A complete running example</a></li><li><a href=#supported-hashing-algorithms-and-cipher-suites>Supported hashing algorithms and cipher suites</a><ul><li><a href=#hashing-algorithms>Hashing algorithms</a></li><li><a href=#cipher-suites>Cipher suites</a></li></ul></li></ul></nav></div></div></div><p><strong>Protect endpoints from public usage</strong> by validating JWT tokens generated by any industry-standard <strong>OpenID Connect (OIDC)</strong> integration.</p><p>Before digging any further, some answers to frequently asked questions:</p><ol><li><p><strong>KrakenD does not generate the tokens itself</strong>. Still, you can plug it into any SaaS or self-hosted OpenID Identity Provider (<strong>IdP</strong>) using industry standards (e.g., Auth0, Azure AD, Google Firebase, Keycloak, etc.)</p></li><li><p><strong>KrakenD does not need to validate all calls using your IdP</strong>. KrakenD validates every incoming call&rsquo;s signature and <strong>it doesn&rsquo;t make token introspection</strong> (asking the IdP data about the token owner).</p></li><li><p><strong>If you don&rsquo;t have an identity server</strong>, you can still use your classic monolith/backend login system and adapt it to return a JWT payload (a simple JSON). From here, let KrakenD <a href=/docs/authorization/jwt-signing/>sign the token for you</a> and start using tokens right away.</p></li><li><p><strong>Your self-hosted identity server doesn&rsquo;t need to be exposed to the Internet</strong>, as it can live behind KrakenD and let the token generation requests be proxied through KrakenD. If you use a SaaS solution, then it&rsquo;s exposed.</p></li><li><p><strong>If you are new to JWT validation</strong>, start reading the <a href=/docs/authorization/jwt-overview/>JSON Web Tokens overview</a></p></li></ol><h2 id=jwt-header-requirements>JWT header requirements</h2><p>When KrakenD decodes the <code>base64</code> token string passed in the <code>Bearer</code> or a cookie, it expects to find in its <strong>header</strong> section the following <strong>three fields</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;alg&#34;</span><span class=p>:</span> <span class=s2>&#34;RS256&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;typ&#34;</span><span class=p>:</span> <span class=s2>&#34;JWT&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;kid&#34;</span><span class=p>:</span> <span class=s2>&#34;MDNGMjU2M0U3RERFQUEwOUUzQUMwQ0NBN0Y1RUY0OEIxNTRDM0IxMw&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>alg</code> and <code>kid</code> values depend on your implementation, but they must be present.</p><div class="rounded-lg p-4 bg-gradient-to-br from-yellow-100 to-yellow-50 border border-yellow-100 overflow-auto"><div class="mb-2 font-bold text-yellow-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" viewBox="0 0 20 20" fill="currentcolor"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"/></svg>Important!</div><div class="text-base text-gray-600 my-2"><p>Make sure you are declaring the right <code>kid</code> in your JWT. Paste a token in a <a href=https://jwt.io/#debugger-io>debugger</a> to find out.</p><p>The value provided in the <code>kid</code> must match with the <code>kid</code> declared at the <code>jwk_url</code> or <code>jwk_local_path</code>.</p></div></div><p>The example above used <a href=https://albert-test.auth0.com/.well-known/jwks.json>this public key</a>. Notice how the <code>kid</code> matches the single key present in the JWK document and the token header.</p><p><strong>KrakenD is built with security in mind</strong> and uses <strong>JWS</strong> (instead of plain JWT or JWE), and the <code>kid</code> points to the right key in the JWS. This is why this entry is mandatory to validate your tokens.</p><h2 id=basic-jwt-validation>Basic JWT validation</h2><p>The JWT validation must be present inside every endpoint definition needing it. If several endpoints are going to require JWT validation consider using the <a href=/docs/configuration/flexible-config/>flexible configuration</a> to avoid repetitive declarations.</p><p>Enable the JWT validation by adding the namespace <code>"auth/validator"</code> inside the <code>extra_config</code> of the desired <code>endpoint</code>.</p><p>For instance, to protect the endpoint <code>/protected/resource</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-JSON data-lang=JSON><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;endpoint&#34;</span><span class=p>:</span> <span class=s2>&#34;/protected/resource&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;extra_config&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>        <span class=nt>&#34;auth/validator&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>            <span class=nt>&#34;alg&#34;</span><span class=p>:</span> <span class=s2>&#34;RS256&#34;</span><span class=p>,</span>
</span></span><span class="line hl"><span class=cl>            <span class=nt>&#34;audience&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;http://api.example.com&#34;</span><span class=p>],</span>
</span></span><span class="line hl"><span class=cl>            <span class=nt>&#34;roles_key&#34;</span><span class=p>:</span> <span class=s2>&#34;http://api.example.com/custom/roles&#34;</span><span class=p>,</span>
</span></span><span class="line hl"><span class=cl>            <span class=nt>&#34;roles&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=s2>&#34;admin&#34;</span><span class=p>],</span>
</span></span><span class="line hl"><span class=cl>            <span class=nt>&#34;jwk_url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://albert-test.auth0.com/.well-known/jwks.json&#34;</span><span class=p>,</span>
</span></span><span class="line hl"><span class=cl>            <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backend&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;url_pattern&#34;</span><span class=p>:</span> <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>This configuration makes sure that:</p><ul><li>The token is well-formed and didn&rsquo;t expire</li><li>The token has a valid signature</li><li>The role of the user is either <code>user</code> or <code>admin</code> (taken from a key in the JWT payload named <code>http://api.example.com/custom/roles</code>)</li><li>The token is not revoked in the bloom filter (see <a href=/docs/authorization/revoking-tokens/>revoking tokens</a>)</li><li>The key from the identity server is cached to avoid hammering it</li></ul><h2 id=jwt-validation-settings>JWT validation settings</h2><p>The following settings are available for JWT validation. There are many options, although generally only the <strong>fields <code>alg</code> and <code>jwk_url</code> or <code>jwk_local_path</code> are mandatory</strong>, and the rest of the keys can be added or not at your best convenience or depending on other options.</p><p>These options are for the <code>extra_config</code>&rsquo;s namespace <code>"auth/validator"</code> placed in every endpoint (use <a href=/docs/configuration/flexible-config/>flexible configuration</a> to avoid code repetition):</p><p class=border-b><span class="text-red-600 text-xl">*</span>
Required <strong>one of</strong>:
<code>alg</code>
+
<code>jwk_local_path</code>
, or
<code>alg</code>
+
<code>jwk_url</code></p><div class=properties><table class="min-w-full divide-y divide-gray-300 nomargin"><tbody><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=alg title=Algorithm class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#alg class=copy-link title="Click to copy link to alg"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>alg</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">The hashing algorithm used by the token issuer.<br>Possible values are: <code>EdDSA</code> , <code>HS256</code> , <code>HS384</code> , <code>HS512</code> , <code>RS256</code> , <code>RS384</code> , <code>RS512</code> , <code>ES256</code> , <code>ES384</code> , <code>ES512</code> , <code>PS256</code> , <code>PS384</code> , <code>PS512</code><br>Defaults to <code>"RS256"</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=audience title=Audience class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#audience class=copy-link title="Click to copy link to audience"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>audience</code></a></h5><br><em class=ml-7>array</em></td><td class="px-6 py-4">Reject tokens that do not contain ALL audiences declared in the list.<table class="min-w-full divide-y divide-gray-300 nomargin"><tbody></tbody></table></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=cache title=Cache class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#cache class=copy-link title="Click to copy link to cache"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>cache</code></a></h5><br><em class=ml-7>boolean</em></td><td class="px-6 py-4">Set this value to <code>true</code> (recommended) to stop downloading keys on every request and store them in memory for the next <code>cache_duration</code> period and avoid hammering the key server, as recommended for performance. Do not use this flag when using <code>jwk_local_ca</code>.<br>Defaults to <code>false</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=cache_duration title="Cache duration" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#cache_duration class=copy-link title="Click to copy link to cache_duration"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>cache_duration</code></a></h5><br><em class=ml-7>integer</em></td><td class="px-6 py-4">The cache duration when the <code>cache</code> is enabled. Value in seconds, defaults to 15 minutes.<br>Defaults to <code>900</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=cipher_suites title="Cipher suites" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#cipher_suites class=copy-link title="Click to copy link to cipher_suites"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>cipher_suites</code></a></h5><br><em class=ml-7>array</em></td><td class="px-6 py-4">Override the default cipher suites. Use it if you want to enforce an even higher security standard.<br>Defaults to <code>[49199,49195,49200,49196,52392,52393]</code><table class="min-w-full divide-y divide-gray-300 nomargin"><tbody></tbody></table></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=cookie_key title="Cookie key" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#cookie_key class=copy-link title="Click to copy link to cookie_key"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>cookie_key</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">Add the key name of the cookie containing the token when it is not passed in the headers</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=cypher_key title="Cypher key" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#cypher_key class=copy-link title="Click to copy link to cypher_key"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>cypher_key</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">The cyphering key.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=disable_jwk_security title=Disable_jwk_security class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#disable_jwk_security class=copy-link title="Click to copy link to disable_jwk_security"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>disable_jwk_security</code></a></h5><br><em class=ml-7>boolean</em></td><td class="px-6 py-4">When true, disables security of the JWK client and allows insecure connections (plain HTTP) to download the keys. Useful for development environments.<br>Defaults to <code>false</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=issuer title=Issuer class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#issuer class=copy-link title="Click to copy link to issuer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>issuer</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">When set, tokens not matching the issuer are rejected.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=jwk_fingerprints title=Roles class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#jwk_fingerprints class=copy-link title="Click to copy link to jwk_fingerprints"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>jwk_fingerprints</code></a></h5><br><em class=ml-7>array</em></td><td class="px-6 py-4">A list of fingerprints (the certificate&rsquo;s unique identifier) for certificate pinning and avoid man-in-the-middle attacks. Add fingerprints in base64 format.<table class="min-w-full divide-y divide-gray-300 nomargin"><tbody></tbody></table></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=jwk_local_ca title="Local CA" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#jwk_local_ca class=copy-link title="Click to copy link to jwk_local_ca"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>jwk_local_ca</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">Path to the CA&rsquo;s certificate verifying a secure connection when downloading the JWK. Use when not recognized by the system (e.g., self-signed certificates).</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=jwk_local_path title="JWK local path" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#jwk_local_path class=copy-link title="Click to copy link to jwk_local_path"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>jwk_local_path</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">Local path to the JWK public keys, has preference over <code>jwk_url</code>. Instead of pointing to an external URL (with <code>jwk_url</code>), public keys are kept locally, in a plain JWK file (security alert!), or encrypted. When encrypted, also add <code>secret_url</code> and <code>cypher_key</code>.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=jwk_url title="JWK URL" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#jwk_url class=copy-link title="Click to copy link to jwk_url"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>jwk_url</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">The URL to the JWK endpoint with the public keys used to verify the token&rsquo;s authenticity and integrity. Use with <code>cache</code> to avoid re-downloading the key on every request. The identity server will receive an HTTP(s) request from KrakenD with a KrakenD user agent.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=key_identify_strategy title="Key identify strategy" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#key_identify_strategy class=copy-link title="Click to copy link to key_identify_strategy"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>key_identify_strategy</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">Allows strategies other than <code>kid</code> to load keys.<br>Possible values are: <code>kid</code> , <code>x5t</code> , <code>kid_x5t</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=operation_debug title=Debug class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#operation_debug class=copy-link title="Click to copy link to operation_debug"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>operation_debug</code></a></h5><br><em class=ml-7>boolean</em></td><td class="px-6 py-4">When <code>true</code>, any JWT <strong>validation operation</strong> gets printed in the log with a level <code>ERROR</code>. You will see if a client does not have sufficient roles, the allowed claims, scopes, and other useful information.<br>Defaults to <code>false</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=propagate_claims title="Claims to propagate" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#propagate_claims class=copy-link title="Click to copy link to propagate_claims"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>propagate_claims</code></a></h5><br><em class=ml-7>array</em></td><td class="px-6 py-4">Enables passing claims in the backend&rsquo;s request header. You can pass nested claims using the dot <code>.</code> operator. E.g.: <code>realm_access.roles</code>.<table class="min-w-full divide-y divide-gray-300 nomargin"><tbody></tbody></table></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=roles title=Roles class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#roles class=copy-link title="Click to copy link to roles"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>roles</code></a></h5><br><em class=ml-7>array</em></td><td class="px-6 py-4">When set, the JWT token not having at least one of the listed roles is rejected.<table class="min-w-full divide-y divide-gray-300 nomargin"><tbody></tbody></table></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=roles_key title="Roles key" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#roles_key class=copy-link title="Click to copy link to roles_key"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>roles_key</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">When validating users through roles, provide the key name inside the JWT payload that lists their roles. If this key is nested inside another object, add <code>roles_key_is_nested</code> and use the dot notation <code>.</code> to traverse each level. E.g.: <code>resource_access.myclient.roles</code> represents the payload <code>{resource_access: { myclient: { roles: ["myrole"] } }</code>.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=roles_key_is_nested title="Roles key is nested" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#roles_key_is_nested class=copy-link title="Click to copy link to roles_key_is_nested"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>roles_key_is_nested</code></a></h5><br><em class=ml-7>boolean</em></td><td class="px-6 py-4">If the roles key uses a nested object using the <code>.</code> dot notation, you must set it to <code>true</code> to traverse the object.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=scopes title=Scopes class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#scopes class=copy-link title="Click to copy link to scopes"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>scopes</code></a></h5><br><em class=ml-7>array</em></td><td class="px-6 py-4">A list of scopes to validate. Make sure to use a list <code>[]</code> in the config, but when passing the token, the scopes should be separated by spaces, e.g.: <code>"my_scopes": "resource1:action1 resource3:action7"</code>.<table class="min-w-full divide-y divide-gray-300 nomargin"><tbody></tbody></table></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=scopes_key title="Scopes key" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#scopes_key class=copy-link title="Click to copy link to scopes_key"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>scopes_key</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">The key name where KrakenD can find the scopes. The key can be a nested object using the <code>.</code> dot notation, e.g.: <code>data.access.my_scopes</code>.</td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=scopes_matcher title="Scopes matcher" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#scopes_matcher class=copy-link title="Click to copy link to scopes_matcher"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>scopes_matcher</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">Defines if the user needs to have in its token at least one of the listed claims (<code>any</code>), or <code>all</code> of them.<br>Possible values are: <code>any</code> , <code>all</code><br>Defaults to <code>"any"</code></td></tr><tr><td class="px-6 py-4 whitespace-nowrap"><h5 id=secret_url title="Secret's URL" class=inline><a href=https://www.krakend.io/docs/authorization/jwt-validation/#secret_url class=copy-link title="Click to copy link to secret_url"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="inline mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg><code>secret_url</code></a></h5><br><em class=ml-7>string</em></td><td class="px-6 py-4">An URL with a custom scheme using one of the supported providers (e.g.: <code>awskms://keyID</code>) (see providers).</td></tr></tbody></table><p class="border-t text-sm text-right"><span class=text-red-600>*</span> indicates a required field. Parameters in alphabetical order.</p></div><p>Here there is an example using an external <code>jwk_url</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;endpoint&#34;</span><span class=p>:</span> <span class=s2>&#34;/foo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;extra_config&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;auth/validator&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;alg&#34;</span><span class=p>:</span> <span class=s2>&#34;RS256&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;jwk_url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://url/to/jwks.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;audience&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;audience1&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;roles_key&#34;</span><span class=p>:</span> <span class=s2>&#34;department&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;roles_key_is_nested&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;roles&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;sales&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;development&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;scopes_key&#34;</span><span class=p>:</span> <span class=s2>&#34;my_scopes&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;scopes_matcher&#34;</span><span class=p>:</span> <span class=s2>&#34;any&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;scopes&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;resource1:action1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;resource2:action1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;resource1:action2&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;issuer&#34;</span><span class=p>:</span> <span class=s2>&#34;http://my.api.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;cookie_key&#34;</span><span class=p>:</span> <span class=s2>&#34;TOKEN&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;disable_jwk_security&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;jwk_fingerprints&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;S3Jha2VuRCBpcyB0aGUgYmVzdCBnYXRld2F5LCBhbmQgeW91IGtub3cgaXQ==&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;cipher_suites&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=mi>10</span><span class=p>,</span> <span class=mi>47</span><span class=p>,</span> <span class=mi>53</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;operation_debug&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class="rounded-lg p-4 bg-gradient-to-br from-green-100 to-green-50 border border-green-100 overflow-auto"><div class="mb-2 font-bold text-green-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636-.707.707M21 12h-1M4 12H3m3.343-5.657-.707-.707m2.828 9.9a5 5 0 117.072.0l-.548.547A3.374 3.374.0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>Performance considerations</div><div class="text-base text-gray-600 my-2">If you use cryptographic algorithms that require high computation such as <code>RS512</code>, make sure your KrakenD instances have a proper CPU setting. Additionally, enable <code>cache</code> to avoid hammering your identity servers and save internal network traffic.</div></div><h3 id=validation-process>Validation process</h3><p>KrakenD does the following validation to let users hit protected endpoints:</p><ul><li>The <code>jwk_url</code> must be accessible by KrakenD at all times (caching is available)</li><li>The token is <a href=https://jwt.io/#debugger-io>well formed</a></li><li>The <code>kid</code> in the header is listed in the <code>jwk_url</code> or <code>jwk_local_path</code>.</li><li>The content of the JWK Keys (<code>k</code>) is <strong>base64</strong> urlencoded</li><li>The algorithm <code>alg</code> is supported by KrakenD and matches exactly the one used in the endpoint definition.</li><li>The token hasn&rsquo;t expired</li><li>The signature is valid.</li><li>The given <code>issuer</code> matches (if present in the configuration)</li><li>The given <code>audience</code> matches (if present in the configuration)</li><li>The given claims are within the endpoint accepted <code>roles</code> (if present in the configuration))</li></ul><p>The configuration allows you to define the set of required roles. For example, a user who passes a token with roles <code>A</code> and <code>B</code>, can access an endpoint requiring <code>"roles": ["A","C"]</code> as it has one of the required options (<code>A</code>).</p><p>If the token is expired, the configuration inside the namespace is incorrect, the signature doesn&rsquo;t match, the required claims do not match, or the token is revoked, a <code>401 Unauthorized</code> is returned.</p><p>When the token doesn&rsquo;t include the defined ACL&rsquo;s required roles, a <code>403 Forbidden</code> is returned.</p><p>When you generate tokens for end-users, make sure to set a <strong>low expiration</strong>. Tokens are supposed to have short lives and should expire in a few minutes or hours.</p><h3 id=accepted-providers-for-encrypting-payloads>Accepted providers for encrypting payloads</h3><p>When using a <code>jwk_local_path</code>, the <code>secret_url</code> scheme accepts different providers:</p><h4 id=local-secrets>Local secrets</h4><p>The local secrets require an URL with the following scheme:</p><pre tabindex=0><code>base64key://base64content
</code></pre><p>The URL host must be base64 encoded and must decode to exactly 32 bytes. Here is an example of the <code>extra_config</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;jwk_local_path&#34;</span><span class=p>:</span><span class=s2>&#34;./jwk.txt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;secret_url&#34;</span><span class=p>:</span><span class=s2>&#34;base64key://smGbjm71Nxd1Ig5FS0wj9SlbzAIrnolCz9bQQ6uAhl4=&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cypher_key&#34;</span><span class=p>:</span><span class=s2>&#34;gCERmfqHMoEu3+utqBa/R1oMZYIvh0OOKtJmnX/hDPDxbXCGXGvO3SF7B5FWxrJnRW7rnjGIV4eP2VLrYX2q9pJM49BpP+A9&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This config will use the key <code>smGbjm71Nxd1Ig5FS0wj9SlbzAIrnolCz9bQQ6uAhl4=</code> for decrypting de <code>cypher_key</code> and then decrypting the content of the file <code>./jwt.txt</code>.</p><p>See this test to <a href=https://github.com/krakendio/krakend-jose/blob/master/jwk_test.go>understand how to generate and encrypt payloads</a>.</p><h4 id=amazon-kms>Amazon KMS</h4><pre tabindex=0><code>awskms://keyID
</code></pre><p>The URL Host + Path is used as the key ID, which can be an Amazon Resource Name (ARN), alias name, or alias ARN. Note that ARNs may contain &ldquo;:&rdquo; characters, which cannot be escaped in the Host part of a URL, so you should use the <code>awskms:///&lt;ARN></code> form.</p><p><a href=https://docs.aws.amazon.com/kms/latest/developerguide/viewing-keys.html#find-cmk-id-arn>More information about AWS KMS</a></p><h4 id=azures-key-vault>Azure&rsquo;s Key Vault</h4><pre tabindex=0><code>azurekeyvault://keyID
</code></pre><p>The credentials are taken from the environment unless the <code>AZURE_KEYVAULT_AUTH_VIA_CLI</code> environment variable is set to true, in which case it uses the <code>az</code> command line.</p><p><a href=https://docs.microsoft.com/en-us/azure/key-vault/general/basic-concepts>More information about Azure Key Vault</a></p><h4 id=google-cloud-kms>Google Cloud KMS</h4><pre tabindex=0><code>gcpkms://projects/[PROJECT_ID]/locations/[LOCATION]/keyRings/[KEY_RING]/cryptoKeys/[KEY]
</code></pre><p>You can take the URL <a href=https://cloud.google.com/kms/docs/object-hierarchy#key>from the GCP console</a>.</p><h4 id=hashicorps-vault>Hashicorp&rsquo;s Vault</h4><pre tabindex=0><code>hashivault://keyID
</code></pre><p>Environment variables <code>VAULT_SERVER_URL</code> and <code>VAULT_SERVER_TOKEN</code> are used.</p><h2 id=passing-claims-to-the-backend-url>Passing claims to the backend URL</h2><p>Since KrakenD 1.2.0, it is possible to use data present in the claims to inject it into the backend&rsquo;s final URL. The notation of the <code>url_pattern</code> field includes the parsing of <code>{JWT.some_claim}</code>, where <code>some_claim</code> is an attribute of your claim.</p><p>For instance, when your JWT payload is represented by something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;sub&#34;</span><span class=p>:</span> <span class=s2>&#34;1234567890&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Mr. KrakenD&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Having a <code>backend</code> defined with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;url_pattern&#34;</span><span class=p>:</span> <span class=s2>&#34;/foo/{JWT.sub}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;POST&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The call to your backend would produce the request:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>POST</span> <span class=s>/foo/1234567890</span>
</span></span></code></pre></div><p>Keep in mind that this syntax in the <code>url_pattern</code> field is only available if the backend loads the extra_config <code>"auth/validator"</code> and that <strong>it does not work with nested attributes</strong> in the payload.</p><p>If KrakenD can&rsquo;t replace the claim&rsquo;s content for any reason, the backend receives a request to the literal URL <code>/foo/{JWT.sub}</code>.</p><h2 id=propagate-jwt-claims-as-request-headers>Propagate JWT claims as request headers</h2><p>It is possible to forward claims in a JWT as request headers. It is a common use case to have, for instance, the sub claim added as an <code>X-User</code> header to the request. The propagation makes that other KrakenD components, such as rate-limiting, can work with information in the token.</p><p><strong>Important:</strong> The endpoint <code>input_headers</code> needs to be set as well, so the backend can see it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;extra_config&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;auth/validator&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;propagate_claims&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;sub&#34;</span><span class=p>,</span> <span class=s2>&#34;x-user&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;realm_access.role&#34;</span><span class=p>,</span> <span class=s2>&#34;x-role&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>In this case, the <code>sub</code> claim&rsquo;s value will be added as <code>x-user</code> header to the request. If the claim does not exist, the mapping is just skipped.</p><p>In addition, the nested property <code>role</code> (inside <code>realm_access</code>) is passed as an <code>x-role</code> header.</p><h2 id=a-complete-running-example>A complete running example</h2><p>The <a href=/docs/overview/playground/>KrakenD Playground</a> demonstrates how to protect endpoints using JWT and includes two examples ready to use:</p><ul><li>Integration with an external third party using a <a href=https://auth0.com/docs/applications/spa/>Single Page Application from Auth0</a></li><li>Integration with an internal identity provider service (mocked) using a symmetric key algorithm and a signer middleware.</li></ul><p>To try it, <a href=https://github.com/krakendio/playground-community>clone the playground</a> and follow the README.</p><h2 id=supported-hashing-algorithms-and-cipher-suites>Supported hashing algorithms and cipher suites</h2><h3 id=hashing-algorithms>Hashing algorithms</h3><p>Accepted values for the <code>alg</code> field are:</p><ul><li><code>EdDSA</code>: EdDSA</li><li><code>HS256</code>: HMAC using SHA-256</li><li><code>HS384</code>: HMAC using SHA-384</li><li><code>HS512</code>: HMAC using SHA-512</li><li><code>RS256</code>: RSASSA-PKCS-v1.5 using SHA-256</li><li><code>RS384</code>: RSASSA-PKCS-v1.5 using SHA-384</li><li><code>RS512</code>: RSASSA-PKCS-v1.5 using SHA-512</li><li><code>ES256</code>: ECDSA using P-256 and SHA-256</li><li><code>ES384</code>: ECDSA using P-384 and SHA-384</li><li><code>ES512</code>: ECDSA using P-521 and SHA-512</li><li><code>PS256</code>: RSASSA-PSS using SHA256 and MGF1-SHA256</li><li><code>PS384</code>: RSASSA-PSS using SHA384 and MGF1-SHA384</li><li><code>PS512</code>: RSASSA-PSS using SHA512 and MGF1-SHA512</li></ul><h3 id=cipher-suites>Cipher suites</h3><p>Accepted values for cipher suites are:</p><ul><li><code>5</code>: TLS_RSA_WITH_RC4_128_SHA</li><li><code>10</code>: TLS_RSA_WITH_3DES_EDE_CBC_SHA</li><li><code>47</code>: TLS_RSA_WITH_AES_128_CBC_SHA</li><li><code>53</code>: TLS_RSA_WITH_AES_256_CBC_SHA</li><li><code>60</code>: TLS_RSA_WITH_AES_128_CBC_SHA256</li><li><code>156</code>: TLS_RSA_WITH_AES_128_GCM_SHA256</li><li><code>157</code>: TLS_RSA_WITH_AES_256_GCM_SHA384</li><li><code>49159</code>: TLS_ECDHE_ECDSA_WITH_RC4_128_SHA</li><li><code>49161</code>: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</li><li><code>49162</code>: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</li><li><code>49169</code>: TLS_ECDHE_RSA_WITH_RC4_128_SHA</li><li><code>49170</code>: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA</li><li><code>49171</code>: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</li><li><code>49172</code>: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</li><li><code>49187</code>: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</li><li><code>49191</code>: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</li></ul><p><strong>Default suites</strong> are:</p><ul><li><code>49199</code>: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</li><li><code>49195</code>: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</li><li><code>49200</code>: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</li><li><code>49196</code>: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</li><li><code>52392</code>: TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305</li><li><code>52393</code>: TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305</li></ul><p class="text-center border-t pt-8"><a class="py-2 px-4 border border-gray-200 bg-gray-100 hover:bg-gray-50 hover:border-gray-100 rounded-lg text-sm" href=https://github.com/krakendio/krakend-documentation/edit/master/authorization/jwt-validation.md><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-denim-500" viewBox="0 0 20 20" fill="currentcolor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793 3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/></svg><span class="hidden lg:inline">Improve this page</span></a></p></section></div></div></div><div class="print:hidden bg-gradient-to-r from-denim-500 to-denim-800 py-8"><div class="max-w-7xl mx-auto sm:flex space-y-8 sm:space-y-0 sm:gap-x-8 text-center sm:text-left items-center justify-between px-8"><div class="flex-grow text-white"><h3>Unresolved issues?</h3><p class="text-lead text-gray-300">The documentation is only a piece of the help you can get! Whether you are looking for Open Source or Enterprise support, see more support channels that can help you.</p></div><div class="flex-none text-center"><a class="bg-denim-500 p-4 text-white rounded-lg" href=/support/><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-white" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656 3.536 3.536M9.172 9.172 5.636 5.636m3.536 9.192-3.536 3.536M21 12A9 9 0 113 12a9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/></svg>See all support channels</a></div></div></div><footer class="print:hidden bg-gradient-to-r from-denim-900 to-denim-800 py-8 sm:py-18 text-gray-300"><div class="max-w-7xl mx-auto px-4"><div class="lg:grid lg:grid-cols-6 md:grid md:grid-cols-4"><div class="lg:col-span-3 pr-12"><img src=/images/logo-white.png width=353 alt="KrakenD API Gateway"><p class="text-xl my-6 text-denim-300">The <strong>Ultra-High performance</strong> Open Source API Gateway</p><p class="text-sm my-4">KrakenD helps application developers release features quickly by eliminating all the complexities of SOA architectures while offering a unique performance.</p></div><div><h6>Social</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=/blog/>Blog</a></li><li><a class=text-denim-300 href=https://medium.com/krakend>Medium</a></li><li><a class=text-denim-300 href=https://twitter.com/krakend_io>Twitter</a></li><li><a class=text-denim-300 href=https://github.com/krakendio>GitHub</a></li><li><a class=text-denim-300 href=https://www.linkedin.com/company/krakend/>LinkedIn</a></li></ul><h6>Experiments</h6><ul class="ml-2 mb-2"><li><a class=text-denim-300 href=https://api2html.com>API2HTML</a></li></ul></div><div><h6>KrakenD</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=/open-source/>Open Source</a></li><li><a class=text-denim-300 href=/enterprise/>Enterprise</a></li><li><a class=text-denim-300 href=/case-study/>Case studies</a></li><li><a class=text-denim-300 href=/docs/benchmarks/>Benchmarks</a></li><li><a class=text-denim-300 href=/download/>Download</a></li><li><a class=text-denim-300 href=/team/>Team</a></li></ul></div><div><h6>Support</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=/support/>Support channels</a></li><li><a class=text-denim-300 href=/docs/overview/>Documentation</a></li><li><a class=text-denim-300 href=https://github.com/krakendio/krakend-ce target=_blank>Open Source</a></li><li><a class=text-denim-300 href=https://github.com/krakendio/krakend-ce/issues>Report an issue</a></li><li><a class=text-denim-300 href=https://www.krakend.io/security-policy/>Report a vulnerability</a></li></ul></div></div><div class="sm:flex sm:justify-between sm:items:center"><div><strong>Copyright &copy; 2017-2023 KRAKEND S.L.</strong> - <a href=/terms/ class=text-denim-300>Terms</a> - <a href=/privacy-policy/ class=text-denim-300>Privacy Policy</a></div><div class=whitespace-nowrap>Made with&nbsp;
<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-red-600 animate-pulse" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656.0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/></svg>&nbsp;in Barcelona</div></div></div></footer><div class="print:hidden fixed w-full text-sm bottom-0 bg-white border-t border-gray-400 pea_cook_wrapper pea_cook_bottom z-20"><p class="relative max-w-7xl mx-auto py-4">We use cookies to understand how you use our site and to improve your overall experience. By continuing to use our site, you accept our Privacy Policy.
<a data-toggle=modal data-target=#cookiesConsent class=text-black href=#>More information</a>
<button class="absolute right-0 top-2 p-2 bg-denim-500 rounded-lg text-white ACCEPT_COOKIES">Accept</button></p></div><div class="hidden fixed top-0 left-0 w-full h-full bg-denim-800 bg-opacity-80" id=cookiesConsent tabindex=-1 role=dialog aria-labelledby=cookiesConsentLabel aria-hidden=true><div class="modal-dialog mx-auto top-1/3 max-w-xl bg-white rounded-lg p-12 relative" role=document><div class=modal-content><div class=mb-4><h5 class=font-bold id=cookiesConsentLabel>Cookies</h5><button type=button class="close absolute right-5 top-5 text-xl" data-dismiss=modal aria-label=Close>
<span aria-hidden=true>✖︎</span></button></div><div class=text-sm><p>In order to give you the best experience, we use cookies and similar technologies for performance, analytics and marketing. Want to know more? <a href=/privacy-policy/>Privacy Policy</a></p></div><div class="mt-4 text-center"><button type=button class="py-1 px-3 bg-denim-500 text-white rounded-lg ACCEPT_COOKIES" data-dismiss=modal>
Accept cookies</button></div></div></div></div><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin=anonymous></script>
<script src=https://www.krakend.io/main.js></script>
<script>(function(s,o,i,t,n,e){n='',t="https://tracking.g2crowd.com/attribution_tracking/conversions/"+s+".js?p="+encodeURI(o)+"&e="+n,e=document.createElement("script"),e.type="application/javascript",e.async=!0,e.src=t,i.getElementsByTagName("head")[0].appendChild(e)})("1007316",document.location.href,document)</script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@alpha></script>
<script type=text/javascript>docsearch({apiKey:"45f6a73a197d567f0e9ab00add7b5e9d",appId:"GALOPT2KCI",indexName:"krakend",container:"#docsearch",searchParameters:{facetFilters:["language:en","version:current","relevant:true"]},debug:!1}),document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-denim-300 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" /></svg> copy';function s(){e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-300 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg> copied!',setTimeout(()=>{e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-denim-300 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" /></svg> copy'},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>