<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.82.1"><title>Handling WebSockets connections - KrakenD API Gateway</title><meta name=description content="KrakenD Enterprise supports communications using the WebSocket Protocol (RFC-6455) to enable two-way communication between a client to a backend host through the API gateway. This technology aims to provide a mechanism for browser-based applications that need two-way communication with servers that do not rely on opening multiple HTTP connections.
KrakenD has the capability of multiplexing. Each individual end-client (e.g., Desktop, Mobile device) establishes a connection with the gateway directly, and KrakenD opens a single channel with the backend host to handle all its connected clients."><meta itemprop=name content="Handling WebSockets connections - KrakenD API Gateway"><meta itemprop=description content="KrakenD Enterprise supports communications using the WebSocket Protocol (RFC-6455) to enable two-way communication between a client to a backend host through the API gateway. This technology aims to provide a mechanism for browser-based applications that need two-way communication with servers that do not rely on opening multiple HTTP connections.
KrakenD has the capability of multiplexing. Each individual end-client (e.g., Desktop, Mobile device) establishes a connection with the gateway directly, and KrakenD opens a single channel with the backend host to handle all its connected clients."><meta itemprop=image content="/images/documentation/krakend-websockets.png"><meta property="og:title" content="Handling WebSockets connections"><meta property="og:description" content="KrakenD Enterprise supports communications using the WebSocket Protocol (RFC-6455) to enable two-way communication between a client to a backend host through the API gateway. This technology aims to provide a mechanism for browser-based applications that need two-way communication with servers that do not rely on opening multiple HTTP connections.
KrakenD has the capability of multiplexing. Each individual end-client (e.g., Desktop, Mobile device) establishes a connection with the gateway directly, and KrakenD opens a single channel with the backend host to handle all its connected clients."><meta property="og:type" content="article"><meta property="og:url" content="https://www.krakend.io/docs/enterprise/websockets/"><meta property="og:image" content="https://www.krakend.io/images/documentation/krakend-websockets.png"><meta property="article:section" content="docs"><meta property="article:published_time" content="2020-05-25T00:00:00+00:00"><meta property="article:modified_time" content="2020-05-25T00:00:00+00:00"><meta property="og:site_name" content="KrakenD - Open source API Gateway"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.krakend.io/images/documentation/krakend-websockets.png"><meta name=twitter:title content="Handling WebSockets connections"><meta name=twitter:description content="KrakenD Enterprise supports communications using the WebSocket Protocol (RFC-6455) to enable two-way communication between a client to a backend host through the API gateway. This technology aims to provide a mechanism for browser-based applications that need two-way communication with servers that do not rely on opening multiple HTTP connections.
KrakenD has the capability of multiplexing. Each individual end-client (e.g., Desktop, Mobile device) establishes a connection with the gateway directly, and KrakenD opens a single channel with the backend host to handle all its connected clients."><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name=viewport><link rel=stylesheet href=https://www.krakend.io/css/bundle.min.cd74abd85194a5f34d2d95ad295e7052d7cf3e335532b800d517712f7ce700f8.css><link rel=icon type=image/png href=/favicon/favicon-196x196.png sizes=196x196><link rel=icon type=image/png href=/favicon/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicon/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicon/favicon-128.png sizes=128x128><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class="krakend page-a7f272992abe83f1a2e4980892341c81"><div class="print:hidden text-white bg-denim-500 py-2 text-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-300 inline" viewBox="0 0 20 20" fill="currentcolor"><path d="M10 2A6 6 0 004 8v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zm0 16a3 3 0 01-3-3h6a3 3 0 01-3 3z"/></svg>KrakenD framework joins the Linux Foundation. <a class=text-blue-300 href=/blog/krakend-framework-joins-the-linux-foundation/>Read more</a>.</div><div class=relative><nav class="max-w-7xl mx-auto lg:flex py-6 items-center justify-between"><div class="ml-4 xl:ml-0"><a href=/ title=Home><img src=/images/logo-krakend.svg alt="KrakenD Logo" width=180></a></div><div class="hidden ml-12 mr-4 xl:mr-0 lg:flex-grow lg:flex lg:justify-between lg:space-x-8" id=navbarMenu><ul class="lg:flex lg:space-x-8 font-medium xl:text-lg whitespace-nowrap"><li><a class=text-gray-700 href=/features/>Features</a></li><li><a class=text-gray-700 href=/enterprise/>Enterprise</a></li><li><a class=text-gray-700 href=https://www.krakend.io/case-study/>Case studies</a></li><li><a class=text-gray-700 href=/support/>Support</a></li><li><a class=text-gray-700 href=/docs/overview/introduction/>Docs</a></li><li class="nav-item dropdown"><a class=text-gray-700 href=# class="nav-link dropdown-toggle" data-toggle=dropdown>About<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg></a><ul class="hidden absolute ml-4 divide-y rounded-lg shadow dropdown-menu bg-white"><li class="py-1 px-6"><a class=text-gray-700 href=/partners/>Partners</a></li><li class="py-1 px-6"><a class=text-gray-700 href=/team/>About us</a></li><li class="py-1 px-6"><a class=text-gray-700 href=/blog/>Blog</a></li></ul></li></ul><ul class="hidden lg:flex lg:space-x-4 text-sm font-medium whitespace-nowrap"><li><a class=text-gray-700 href=/download/><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414.0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414.0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>Downloads</a></li><li><a class=text-gray-700 href=https://designer.krakend.io><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" viewBox="0 0 20 20" fill="currentcolor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793 3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/></svg>Designer</a></li></ul></div><button class="print:hidden absolute right-4 top-2 lg:hidden p-3 rounded-lg border border-gray-100 navbar-toggler" type=button data-toggle=collapse data-target=#navbarMenu aria-controls=navbarMenu aria-expanded=false aria-label="Toggle navigation"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></nav></div><div class=border-t><div class="grid grid-cols-1 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-8 py-6 max-w-7xl xl:max-w-8xl mx-auto"><div class="print:hidden order-last md:order-first col-span-2"><div class=p-4><div class="flex justify-between border border-gray-200 mt-2 mb-2 rounded-lg"><input class="p-2 rounded-l-lg flex-grow w-full" type=text id=search-input placeholder="Search in docs"><div class="flex-none p-2 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg></div></div><h4 class="uppercase font-medium text-gray-400 text-xs mb-4"><a class="btn bg-denim-100 hover:text-denim-800 transform shadow hover:shadow-lg hover:-translate-y-1 duration-150 text-gray-700" href=# class="nav-link dropdown-toggle" data-toggle=collapse data-target=#doc-selector>Enterprise docs (current)<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg></a></h4><div id=doc-selector class="hidden ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500"><ul class="px-6 text-sm font-medium"><li>KrakenD Community Edition<ul><li class="p-1 nav-item child"><a href=/docs/overview/introduction/ class="nav-link children">v1.3.0 (latest)</a></li></ul></li>KrakenD Enterprise Edition<ul><li class="p-1 nav-item child"><a href=/docs/enterprise/overview/introduction/ class="nav-link children font-bold">v1.3.0 (latest)</a></li></ul></li></ul></div><ul class="px-6 space-y-3 text-sm font-medium" id=doc-sections><li class=nav-item><a data-toggle=collapse data-target=#menu-0 data-hide="#doc-sections > li.nav-item > div" href=#menu-0 role=button aria-expanded=false aria-controls=menu-0 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Getting Started</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-0><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/overview/introduction/ class="nav-link children">Introduction</a></li><li class="nav-item child"><a href=/docs/enterprise/overview/installing/ class="nav-link children">Installing KrakenD Enterprise</a></li><li class="nav-item child"><a href=/docs/enterprise/overview/usage/ class="nav-link children">Running KrakenD</a></li><li class="nav-item child"><a href=/docs/enterprise/overview/plugins/ class="nav-link children">Enterprise plugins</a></li><li class="nav-item child"><a href=/docs/enterprise/overview/krakend-vs-krakend-ce/ class="nav-link children">Lura vs. KrakenD</a></li><li class="nav-item child"><a href=/docs/enterprise/overview/playground/ class="nav-link children">The Playground</a></li><li class="nav-item child"><a href=/docs/enterprise/overview/guides/ class="nav-link children">Tutorials and Guides</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-1 data-hide="#doc-sections > li.nav-item > div" href=#menu-1 role=button aria-expanded=false aria-controls=menu-1 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Configuration file(s)</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-1><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/configuration/overview/ class="nav-link children">Configuration overview</a></li><li class="nav-item child"><a href=/docs/enterprise/configuration/structure/ class="nav-link children">The configuration file</a></li><li class="nav-item child"><a href=/docs/enterprise/configuration/flexible-config/ class="nav-link children">Multiple configuration files</a></li><li class="nav-item child"><a href=/docs/enterprise/configuration/supported-formats/ class="nav-link children">Supported file formats</a></li><li class="nav-item child"><a href=/docs/enterprise/configuration/environment-vars/ class="nav-link children">Environment vars</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-2 data-hide="#doc-sections > li.nav-item > div" href=#menu-2 role=button aria-expanded=false aria-controls=menu-2 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Command Line</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-2><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/commands/run/ class="nav-link children">Run</a></li><li class="nav-item child"><a href=/docs/enterprise/commands/check/ class="nav-link children">Check</a></li><li class="nav-item child"><a href=/docs/enterprise/commands/openapi/ class="nav-link children">Generator: OpenAPI</a></li><li class="nav-item child"><a href=/docs/enterprise/commands/postman/ class="nav-link children">Generator: Postman</a></li><li class="nav-item child"><a href=/docs/enterprise/commands/config2dot/ class="nav-link children">Generator: Config to Graph</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-3 data-hide="#doc-sections > li.nav-item > div" href=#menu-3 role=button aria-expanded=false aria-controls=menu-3 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Service Settings</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-3><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/service-settings/tls/ class="nav-link children">TLS</a></li><li class="nav-item child"><a href=/docs/enterprise/service-settings/cors/ class="nav-link children">CORS</a></li><li class="nav-item child"><a href=/docs/enterprise/service-settings/security/ class="nav-link children">Security</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-4 data-hide="#doc-sections > li.nav-item > div" href=#menu-4 role=button aria-expanded=true aria-controls=menu-4 class="nav-link parent active text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Endpoint Configuration</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500" id=menu-4><ul class="space-y-2 nav flex-column menu-open"><li class="nav-item child"><a href=/docs/enterprise/endpoints/creating-endpoints/ class="nav-link children">Creating endpoints</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/rate-limit/ class="nav-link children">Rate Limits</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/response-manipulation/ class="nav-link children">Response manipulation</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/global-rate-limit/ class="nav-link children">Global rate limit</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/status-codes/ class="nav-link children">Status Codes</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/concurrent-requests/ class="nav-link children">Concurrent Requests</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/parameter-forwarding/ class="nav-link children">Parameter forwarding</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/debug-endpoint/ class="nav-link children">Debug endpoint</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/content-types/ class="nav-link children">Content Types</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/no-op/ class="nav-link children">No-op (proxy only)</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/sequential-proxy/ class="nav-link children">Sequential Proxy (chain reqs.)</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/static-proxy/ class="nav-link children">Static responses (stubs)</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/common-expression-language-cel/ class="nav-link children">Checking requests and responses</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/lua/ class="nav-link children">Lua scripting</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/serve-static-content/ class="nav-link children">Serving or using static content</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/wildcard/ class="nav-link children">Wildcards</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/geoip/ class="nav-link children">GeoIP integration</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/url-rewrite/ class="nav-link children">URL Rewrite</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/json-schema/ class="nav-link children">JSON Schema validation</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/openapi/ class="nav-link children">OpenAPI/Swagger</a></li><li class="nav-item child"><a href=/docs/enterprise/websockets/ class="nav-link children font-bold"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-3 w-3" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>WebSockets</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/virtual-hosts/ class="nav-link children">Virtual Hosts</a></li><li class="nav-item child"><a href=/docs/enterprise/endpoints/health/ class="nav-link children">Healthcheck</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-5 data-hide="#doc-sections > li.nav-item > div" href=#menu-5 role=button aria-expanded=false aria-controls=menu-5 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Backends Configuration</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-5><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/backends/overview/ class="nav-link children">Declaring backends</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/data-manipulation/ class="nav-link children">Data manipulation</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/rate-limit/ class="nav-link children">Proxy rate limit</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/circuit-breaker/ class="nav-link children">Circuit Breaker</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/supported-encodings/ class="nav-link children">Supported encodings</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/caching/ class="nav-link children">Caching responses</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/shadow-backends/ class="nav-link children">Traffic shadowing/mirroring</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/flatmap/ class="nav-link children">Array manipulations</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/martian/ class="nav-link children">Transform requests and responses</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/amqp/ class="nav-link children">AMQP - RabbitMQ</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/pubsub/ class="nav-link children">Publisher/subscribe</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/lambda/ class="nav-link children">Lambda functions</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/client-redirect/ class="nav-link children">Client redirects</a></li><li class="nav-item child"><a href=/docs/enterprise/backends/detailed-errors/ class="nav-link children">Return backend errors</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-6 data-hide="#doc-sections > li.nav-item > div" href=#menu-6 role=button aria-expanded=false aria-controls=menu-6 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Authentication & Authorization</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-6><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/authentication/api-keys/ class="nav-link children">API-Key authentication</a></li><li class="nav-item child"><a href=/docs/enterprise/authentication/basic-authentication/ class="nav-link children">Basic Authentication</a></li><li class="nav-item child"><a href=/docs/enterprise/authorization/jwt-overview/ class="nav-link children">JWT overview</a></li><li class="nav-item child"><a href=/docs/enterprise/authorization/jwt-validation/ class="nav-link children">JWT Validation</a></li><li class="nav-item child"><a href=/docs/enterprise/authorization/jwt-signing/ class="nav-link children">JWT Signing</a></li><li class="nav-item child"><a href=/docs/enterprise/authorization/revoking-tokens/ class="nav-link children">Revoking tokens</a></li><li class="nav-item child"><a href=/docs/enterprise/authentication/multiple-identity-providers/ class="nav-link children">Multiple IdP</a></li><li class="nav-item child"><a href=/docs/enterprise/authorization/mutual-authentication/ class="nav-link children">Mutual TLS Authentication (mTLS)</a></li><li class="nav-item child"><a href=/docs/enterprise/authorization/client-credentials/ class="nav-link children">OAuth2 Client credentials</a></li><li class="nav-item child"><a href=/docs/enterprise/authorization/auth0/ class="nav-link children">Auth0 integration</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-7 data-hide="#doc-sections > li.nav-item > div" href=#menu-7 role=button aria-expanded=false aria-controls=menu-7 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Traffic Management</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-7><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/throttling/overview/ class="nav-link children">Rate limits and throttling</a></li><li class="nav-item child"><a href=/docs/enterprise/throttling/botdetector/ class="nav-link children">Bot detector</a></li><li class="nav-item child"><a href=/docs/enterprise/throttling/timeouts/ class="nav-link children">Request timeouts</a></li><li class="nav-item child"><a href=/docs/enterprise/throttling/max-idle-connections/ class="nav-link children">Max IDLE connections</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-8 data-hide="#doc-sections > li.nav-item > div" href=#menu-8 role=button aria-expanded=false aria-controls=menu-8 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Telemetry</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-8><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/telemetry/instana/ class="nav-link children">Instana Dashboard</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/overview/ class="nav-link children">Telemetry integrations</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/opencensus/ class="nav-link children">Opencensus</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/prometheus/ class="nav-link children">Prometheus</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/influxdb/ class="nav-link children">InfluxDB</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/datadog/ class="nav-link children">Datadog</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/zipkin/ class="nav-link children">Zipkin</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/jaeger/ class="nav-link children">Jaeger</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/xray/ class="nav-link children">AWS X-Ray</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/stackdriver/ class="nav-link children">Google Stackdriver</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/azure/ class="nav-link children">Azure Monitor</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/ocagent/ class="nav-link children">OpenCensus Agent</a></li><li class="nav-item child"><a href=/docs/enterprise/telemetry/logger/ class="nav-link children">Logger</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-9 data-hide="#doc-sections > li.nav-item > div" href=#menu-9 role=button aria-expanded=false aria-controls=menu-9 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Logging</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-9><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/logging/extended-logging/ class="nav-link children">Logging overview</a></li><li class="nav-item child"><a href=/docs/enterprise/logging/graylog-gelf/ class="nav-link children">Graylog - GELF</a></li><li class="nav-item child"><a href=/docs/enterprise/logging/logstash/ class="nav-link children">Logstash</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-10 data-hide="#doc-sections > li.nav-item > div" href=#menu-10 role=button aria-expanded=false aria-controls=menu-10 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Extended Metrics</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-10><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/extended-metrics/metrics/ class="nav-link children">Metrics and /__stats</a></li><li class="nav-item child"><a href=/docs/enterprise/extended-metrics/influxdb/ class="nav-link children">InfluxDB exporter</a></li><li class="nav-item child"><a href=/docs/enterprise/extended-metrics/grafana/ class="nav-link children">Grafana dashboard</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-11 data-hide="#doc-sections > li.nav-item > div" href=#menu-11 role=button aria-expanded=false aria-controls=menu-11 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Deploying</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-11><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/deploying/best-practices/ class="nav-link children">Best practices</a></li><li class="nav-item child"><a href=/docs/enterprise/deploying/kubernetes/ class="nav-link children">Kubernetes</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-12 data-hide="#doc-sections > li.nav-item > div" href=#menu-12 role=button aria-expanded=false aria-controls=menu-12 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Cluster</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-12><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/cluster/cluster-overview/ class="nav-link children">Cluster Overview</a></li><li class="nav-item child"><a href=/docs/enterprise/cluster/configuration/ class="nav-link children">Setting up a cluster</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-13 data-hide="#doc-sections > li.nav-item > div" href=#menu-13 role=button aria-expanded=false aria-controls=menu-13 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Service Discovery</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-13><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/service-discovery/overview/ class="nav-link children">Service Discovery overview</a></li><li class="nav-item child"><a href=/docs/enterprise/service-discovery/dns-srv/ class="nav-link children">DNS SRV</a></li><li class="nav-item child"><a href=/docs/enterprise/service-discovery/etcd/ class="nav-link children">etcd</a></li><li class="nav-item child"><a href=/docs/enterprise/service-discovery/eureka/ class="nav-link children">Eureka</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-14 data-hide="#doc-sections > li.nav-item > div" href=#menu-14 role=button aria-expanded=false aria-controls=menu-14 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Developer Tools</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-14><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/developer/overview/ class="nav-link children">Developer Tools</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-15 data-hide="#doc-sections > li.nav-item > div" href=#menu-15 role=button aria-expanded=false aria-controls=menu-15 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Customizing KrakenD</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-15><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/extending/the-big-picture/ class="nav-link children">The big picture</a></li><li class="nav-item child"><a href=/docs/enterprise/extending/writing-plugins/ class="nav-link children">Writing custom plugins</a></li><li class="nav-item child"><a href=/docs/enterprise/extending/plugin-tools/ class="nav-link children">Plugin validation tools</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-16 data-hide="#doc-sections > li.nav-item > div" href=#menu-16 role=button aria-expanded=false aria-controls=menu-16 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Benchmarks</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-16><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/benchmarks/overview/ class="nav-link children">Benchmarks Overview</a></li><li class="nav-item child"><a href=/docs/enterprise/benchmarks/api-gateway-benchmark/ class="nav-link children">KrakenD vs others</a></li><li class="nav-item child"><a href=/docs/enterprise/benchmarks/aws/ class="nav-link children">On Amazon Web Services</a></li><li class="nav-item child"><a href=/docs/enterprise/benchmarks/local/ class="nav-link children">Local machine</a></li></ul></div></li><li class=nav-item><a data-toggle=collapse data-target=#menu-17 data-hide="#doc-sections > li.nav-item > div" href=#menu-17 role=button aria-expanded=false aria-controls=menu-17 class="nav-link parent text-denim-800"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg>Frequently Asked Questions</a><div class="ml-5 mb-4 mt-2 bg-gray-100 px-4 py-2 text-sm border-l-2 border-denim-500 hidden" id=menu-17><ul class="space-y-2 nav flex-column"><li class="nav-item child"><a href=/docs/enterprise/faq/ class="nav-link children">KrakenD F.A.Q</a></li></ul></div></li></ul></div><p class=text-center><small><a href=/docs/ rel=nofollow class=text-muted>Recent changes</a></small></p></div><div class="col-span-3 lg:col-span-4 xl:col-span-5 prose max-w-full text-lg"><section class=px-4><h1>Handling WebSockets connections</h1><div class="rounded-lg p-4 bg-gradient-to-br from-yellow-100 to-yellow-50"><div class="font-bold text-yellow-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline -mt-1" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902.0l1.519 4.674a1 1 0 00.95.69h4.915c.969.0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176.0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>This feature is exclusive of <a href=/enterprise/ title="KrakenD Enterprise"><span class="font-bold text-yellow-700 underline">KrakenD Enterprise</span></a></div></div><p class=main-image><img src=/images/documentation/krakend-websockets.png></p><div class="hidden isolate lg:block text-base float-right ml-4 max-w-sm space-y-4 z-10 relative"><div id=toc-module class="print:hidden shadow rounded bg-white mt-2"><a class="block m-0 bg-gray-100 px-4 py-2 uppercase text-sm close-arrow" data-toggle=collapse data-target=#table-of-contents-list href=#><span class=float-right>&nbsp;</span>
<span class=text-gray-500><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline -mt-1" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>Table of contents</span></a><div id=table-of-contents-list class="px-4 pb-1"><nav id=TableOfContents><ul><li><a href=#broadcast-vs-directed-communication>Broadcast vs. directed communication.</a></li><li><a href=#message-format>Message format</a><ul><li><a href=#krakend-message-for-the-backend>KrakenD message for the backend</a></li><li><a href=#backend-message-for-krakend>Backend message for KrakenD</a></li></ul></li><li><a href=#configuration>Configuration</a></li><li><a href=#handshaking>Handshaking</a><ul><li><a href=#connectivity-issues>Connectivity issues</a></li></ul></li></ul></nav></div></div></div><p>KrakenD Enterprise supports communications using the WebSocket Protocol (RFC-6455) to enable two-way communication between a client to a backend host through the API gateway. This technology aims to provide a mechanism for browser-based applications that need two-way communication with servers that do not rely on opening multiple HTTP connections.</p><p>KrakenD has the capability of <strong>multiplexing</strong>. Each individual end-client (e.g., Desktop, Mobile device) establishes a connection with the gateway directly, and KrakenD opens a single channel with the backend host to handle all its connected clients.</p><p>The backend decides whether to send the responses to a specific set of client(s) or to broadcast to everyone. This decision depends on the <strong>message format</strong></p><h2 id=broadcast-vs-directed-communication>Broadcast vs. directed communication.</h2><p>No matter how many clients connect to KrakenD through WebSockets, that KrakenD keeps <strong>one connection with the backend server</strong> (as depicted above). For instance, you might have 1000 concurrent users in a chat room, with 1000 sockets opened against KrakenD, but KrakenD still communicates with your backend using one channel.</p><p>Depending on your business type, you might have two different needs to communicate with the users connected to the gateway:</p><ul><li>Send a message to all your clients (<strong>broadcast</strong>)</li><li>Send a message only to some user(s) (<strong>directed communication</strong>)</li></ul><p>By default, unrecognized messages received by KrakenD do broadcast to all clients. The <strong>message format</strong> allows you to specify how you would like KrakenD to process your backend responses (broadcast to all connected users, or just to a specific session).</p><h2 id=message-format>Message format</h2><p>The message format is the mechanism used by KrakenD to determine if a message needs broadcasting or addressing a specific set of clients.</p><p>The recognized message format for the bidirectional communication is a JSON object with the following fields:</p><ul><li><code>body</code>: Mandatory. A <strong>base64</strong> representation of the content.</li><li><code>session</code>: The session is a filter to determine who is the sender or the receiver of a message.</li><li><code>url</code>: The affected KrakenD endpoint.</li></ul><h3 id=krakend-message-for-the-backend>KrakenD message for the backend</h3><p>When the client interacts with KrakenD, the gateway sends messages to the backend with a structure like the following:</p><pre><code>{ 
    &quot;url&quot;: &quot;/chat/krakend&quot;,
    &quot;session&quot;: { 
        &quot;uuid&quot;: &quot;0b251b07-5611-49e5-b69f-cf2cb8d339d6&quot;,
        &quot;Room&quot;:&quot;krakend&quot;,
    },
    &quot;body&quot;: &quot;SGVsbG8gV29ybGQh&quot;
}
</code></pre><p>The client sent what you can see in the <code>body</code> (<em>&ldquo;Hello World!"</em> base64 encoded).</p><p>The rest of the fields are contextual metadata for your convenience, so the backend can determine who is doing the call and from which originating endpoint.</p><p>Essential observations on the example above are:</p><ul><li>The <code>body</code> is <strong>base64</strong> encoded.</li><li>The <code>session</code> contains information about the client making the request. At least you always receive an <code>uuid</code> which is a randomly assigned by KrakenD to the client when a new session starts.</li><li>If your endpoint contains placeholders (e.g., as in <code>/chat/{room}</code>), the placeholder parameters are available under <code>session</code>, but using the first letter uppercased. In this example, <code>Room</code> holds the value of <code>{room}</code>).</li></ul><h3 id=backend-message-for-krakend>Backend message for KrakenD</h3><p>The return from your WS backend needs to use the expected format if you don&rsquo;t want to broadcast it.</p><p>The response <code>body</code> is mandatory, and KrakenD forwards to all connected clients matching the filters you pass. If you don&rsquo;t pass any filters, then we are talking about broadcasting. The filters are a combination of the <code>session</code> and the <code>url</code>.</p><p>If for instance, you only want to communicate with a specific user, you would have an answer like this one:</p><pre><code>{
    &quot;session&quot;: { &quot;uuid&quot;: &quot;0b251b07-5611-49e5-b69f-cf2cb8d339d6&quot;},
    &quot;body&quot;: &quot;SGVsbG8gV29ybGQh&quot;
}
</code></pre><p>If you want to communicate with all users connected to an endpoint, then you could use:</p><pre><code>{
    &quot;url&quot;: &quot;/chat/krakend&quot;,
    &quot;body&quot;: &quot;SGVsbG8gV29ybGQh&quot;
}
</code></pre><p>And a broadcast:</p><pre><code>{
    &quot;body&quot;: &quot;SGVsbG8gV29ybGQh&quot;
}
</code></pre><p>Notice that when the JSON fields <code>url</code> or <code>session</code> exist, the <code>body</code> is sent to the specific subgroup instead of being broadcasted.</p><h2 id=configuration>Configuration</h2><p>The configuration to enable WebSockets is straightforward; the only requirement is to include the <code>github.com/devopsfaith/krakend-websocket</code> namespace at the <code>endpoint</code> level, and that you declare one backend host (and only one) using the <code>ws://</code> or <code>wss://</code> schema.</p><p>The flag <code>"disable_host_sanitize": true</code> is also necessary for the backend.</p><p>Here there is an example:</p><pre><code>{
  &quot;endpoint&quot;: &quot;/chat/{room}&quot;,
  &quot;backend&quot;: [
    {
      &quot;url_pattern&quot;: &quot;/ws&quot;,
      &quot;disable_host_sanitize&quot;: true,
      &quot;host&quot;: [ &quot;ws://localhost:8081&quot; ]
    }
  ],
  &quot;extra_config&quot;:{
    &quot;github.com/devopsfaith/krakend-websocket&quot;: true
  }
}
</code></pre><h2 id=handshaking>Handshaking</h2><p>The WS protocol consists of an opening handshake followed by basic message framing, layered over TCP.</p><p>The handshake process is straightforward but necessary for KrakenD to determine if the backend server is alive. It&rsquo;s managed by KrakenD itself, and it consists in nothing else than opening a WebSocket against the backend server and trying to find a response (like a ping/pong). We can simplify it as:</p><pre><code>krakend =&gt; {&quot;msg&quot;:&quot;KrakenD WS proxy starting&quot;}
backend =&gt; OK
</code></pre><p>After the successful handshake, KrakenD is ready to start serving and communicating with WS.</p><h3 id=connectivity-issues>Connectivity issues</h3><p>The nature of WebSocket connections is that they have kind of a &ldquo;state&rdquo; and use a lasting connection. There are implications to be aware of when connectivity issues or downtimes arise.</p><p><strong>Issues during startup</strong>:
The most visible problem of all. If, for whatever reason, the WebSocket on the backend server is not available <strong>during KrakenD startup</strong>, KrakenD won&rsquo;t start. This event shows in the console with a <em>CRITICAL</em> message like this one:</p><pre><code>[KRAKEND] 2018/12/26 - 12:31:24.708 ▶ CRITIC websocket.Dial ws://localhost:8081/ws: dial tcp [::1]:8081: connect: connection refused
</code></pre><p>If KrakenD relies on WebSocket communication, make sure that the backends are alive when KrakenD starts, or otherwise, the gateway won&rsquo;t.</p><p><strong>During regular operation</strong>:
If, on the other hand, the handshake succeeded, but at a given point in time, the backend server with the WS dies, the affected endpoint becomes non-operational.</p><p>All clients connected to KrakenD during the downtime of your backend&rsquo;s WebSocket keep their connection with KrakenD, despite the fact that KrakenD is unable to pass any data from/to the backend server. The error indicating this behavior is:</p><pre><code>[KRAKEND] 2018/12/26 - 15:34:07.178 ▶ WARNIN WS client: EOF
</code></pre><p>Even after the backend service has resumed its service, the affected endpoint(s) won&rsquo;t be fully available. The connection remains unstable until the KrakenD service is restarted again with a successful connection. So in the case of backend downtime, the recommended course of action is to restart or redeploy KrakenD to minimize issues.</p></section></div></div></div><div class="print:hidden bg-gradient-to-r from-denim-500 to-denim-800 py-8"><div class="max-w-7xl mx-auto sm:flex space-y-8 sm:space-y-0 sm:gap-x-8 text-center sm:text-left items-center justify-between px-8"><div class="flex-grow text-white"><h3>Unresolved issues?</h3><p class="text-lead text-gray-300">The documentation is only a piece of the help you can get! Whether you are looking for Open Source or Enterprise support, see more support channels that can help you.</p></div><div class="flex-none text-center"><a class="bg-denim-500 p-4 text-white rounded-lg" href=/support/><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-white" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656 3.536 3.536M9.172 9.172 5.636 5.636m3.536 9.192-3.536 3.536M21 12A9 9 0 113 12a9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/></svg>See all support channels</a></div></div></div><footer class="print:hidden bg-gradient-to-r from-denim-900 to-denim-800 py-8 sm:py-18 text-gray-300"><div class="max-w-7xl mx-auto px-4"><div class="lg:grid lg:grid-cols-6 md:grid md:grid-cols-4"><div class="lg:col-span-3 pr-12"><img src=/images/logo-white.png width=353><p class="text-xl my-6 text-denim-500">The <strong>Ultra-High performance</strong> Open Source API Gateway with middlewares</p><p class="text-sm my-4">KrakenD helps application developers release features quickly by eliminating all the complexities of SOA architectures while offering a unique performance.</p><div class=social><a href=https://www.facebook.com/apigateway target=_blank title=Facebook><i class="fab fa-facebook-official" aria-hidden=true></i><span class=sr-only>Facebook</span></a>
<a href=https://twitter.com/krakend_io target=_blank class=social-btn-twitter title=Twitter><i class="fab fa-twitter" aria-hidden=true></i><span class=sr-only>Twitter</span></a>
<a href=https://github.com/devopsfaith target=_blank class=social-btn-github title=GitHub><i class="fab fa-github" aria-hidden=true></i><span class=sr-only>GitHub</span></a>
<a href=mailto:support@krakend.io target=_blank title="Send us an email"><i class="fa fa-envelope" aria-hidden=true></i><span class=sr-only>Mail</span></a></div></div><div><h6>by Devops Faith</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=https://devops.faith>Devops Faith</a></li><li><a class=text-denim-300 href=/blog/>Blog</a></li><li><a class=text-denim-300 href=https://medium.com/devops-faith>Medium</a></li><li><a class=text-denim-300 href=mailto:support@krakend.io>Contact Us</a></li></ul><h6>More products</h6><ul class="ml-2 mb-2"><li><a class=text-denim-300 href=http://api2html.com>API2HTML</a></li></ul></div><div><h6>KrakenD</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=/features/>Features</a></li><li><a class=text-denim-300 href=/docs/benchmarks/overview/>Benchmarks</a></li><li><a class=text-denim-300 href=/download/>Download</a></li><li><a class=text-denim-300 href=/blog/>KrakenD Blog</a></li><li><a class=text-denim-300 href=/team/>Team</a></li><li><a class=text-denim-300 href=/case-study/>Case studies</a></li></ul></div><div><h6>Support</h6><ul class="ml-2 my-2"><li><a class=text-denim-300 href=/docs/overview/introduction/>Documentation</a></li><li><a class=text-denim-300 href=https://github.com/devopsfaith/krakend target=_blank>Open Source</a></li><li><a class=text-denim-300 href=https://github.com/devopsfaith/krakend/issues>Report a problem</a></li><li><a class=text-denim-300 href=/support/>Support</a></li></ul></div></div><div class="sm:flex sm:justify-between sm:items:center"><div><strong>Copyright &copy; 2017-2021 <a href=https://devops.faith>Devops Faith</a></strong> - <a href=/terms>Terms</a></div><div class=whitespace-nowrap>Made with<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline text-red-600 animate-pulse" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656.0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/></svg>
in Barcelona by <a href=https://devops.faith><img class=inline width=63 src=/images/devops-faith-logo-inverse.png></a></div></div></div></footer><div class="print:hidden fixed w-full text-sm bottom-0 bg-white border-t border-gray-400 pea_cook_wrapper pea_cook_bottom"><p class="relative max-w-7xl mx-auto py-4">We use cookies to understand how you use our site and to improve your overall experience. By continuing to use our site, you accept our Privacy Policy.
<a data-toggle=modal data-target=#cookiesConsent class=text-black href=#>More information</a>
<button class="absolute right-0 top-2 p-2 bg-denim-500 rounded-lg text-white ACCEPT_COOKIES">Accept</button></p></div><div class="hidden fixed top-0 left-0 w-full h-full bg-denim-800 bg-opacity-80" id=cookiesConsent tabindex=-1 role=dialog aria-labelledby=cookiesConsentLabel aria-hidden=true><div class="modal-dialog mx-auto top-1/3 max-w-xl bg-white rounded-lg p-12 relative" role=document><div class=modal-content><div class=mb-4><h5 class=font-bold id=cookiesConsentLabel>Cookies</h5><button type=button class="close absolute right-5 top-5 text-xl" data-dismiss=modal aria-label=Close>
<span aria-hidden=true>✖︎</span></button></div><div class=text-sm><p>In order to give you the best experience, we use cookies and similar technologies for performance, analytics and marketing. Want to know more? <a href=/privacy-policy/>Privacy Policy</a></p></div><div class="mt-4 text-center"><button type=button class="py-1 px-3 bg-denim-500 text-white rounded-lg ACCEPT_COOKIES" data-dismiss=modal>
Accept cookies</button></div></div></div></div><script type=application/javascript>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-87994359-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin=anonymous></script><script src=https://www.krakend.io/main.js></script><script>window.fwSettings={widget_id:36000000396},!function(){if("function"!=typeof window.FreshworksWidget){var a=function(){a.q.push(arguments)};a.q=[],window.FreshworksWidget=a}}()</script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script type=text/javascript>docsearch({apiKey:'970b810ede7ea631d56739b20e9b348f',indexName:'krakend',inputSelector:'#search-input',debug:!1})</script></body></html>